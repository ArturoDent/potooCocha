{"version":3,"names":[],"mappings":"","sources":["SouthAmerica.js"],"sourcesContent":["\"use strict\";\r\n\r\nvar map;\r\n\r\nvar countries  = { \"Argentina\":0, \"Aruba\":1, \"Bolivia\":2, \"Brazil\":3, \"Chile\":4,\r\n  \"Colombia\":5, \"Curaçao\":6, \"Ecuador\":7, \"FrenchGuiana\":8,\r\n  \"Guyana\":9, \"Paraguay\":10, \"Peru\":11, \"Suriname\":12, \"Trinidad\":13,\r\n  \"Uruguay\":14, \"Venezuela\":15, \"Bonaire\":16, \"Falklands\":17 };\r\n\r\n\r\nvar endemicColor         =  \"#C23BC3\";\r\nvar extinctColor         =  \"#f33\";\r\n// var residentColor        =  \"#678\";\r\nvar residentColor        =  \"#00838f\";\r\n\r\n// var nonBreederColor      =  \"#df7900\";\r\nvar nonBreederColor      =  \"#994c00\";\r\nvar vagrantColor         =  \"gold\";\r\nvar hypotheticalColor    =  \"#005903\";\r\n// var hypotheticalColor    =  \"#007913\";\r\nvar introducedColor      =  \"#222\";\r\n\r\nvar baseColor            =  \"​#444\";\r\nvar baseStrokeColor      =  \"#bbb\";\r\n\r\n/* global addBirdNameToMap birds currentMap */\r\n\r\n// eslint-disable-next-line\r\nfunction initCurrentMap() {\r\n\r\n  prepareSVGstyles(\"SAMsvg\");\r\n\r\n  map = document.getElementById(\"currentMap\");\r\n  map.style.opacity = \"1\";\r\n}\r\n\r\n// eslint-disable-next-line\r\nfunction prepareSVGstyles(evt)  {\r\n\r\n  var svg;\r\n\r\n  if (evt.target && evt.target.id === \"SAMsvg\") {\r\n    svg = document.getElementById(\"SAMsvg\");\r\n  }\r\n  else {\r\n    svg = document.getElementById(evt);\r\n  }\r\n\r\n  var svgDoc = svg.contentDocument;\r\n\r\n  for (var country in countries) {\r\n\r\n    var cc = svgDoc.getElementById(country);\r\n\r\n    if (!cc) continue;\r\n\r\n    setSVGstyles(cc);\r\n  }\r\n}\r\n\r\n// eslint-disable-next-line\r\nfunction setSVGstyles(obj )  {\r\n\r\n  if (obj.nodeName === \"path\"  || obj.nodeName === \"circle\") {\r\n\r\n    // obj.style.transition = \"fill 1s, stroke 1s\";\r\n    obj.style.transition = \"fill 1s\";\r\n  }\r\n\r\n  else if (obj.parentNode.nodeName === \"g\")  {\r\n    // obj.parentNode.style.filter = \"blur(20px)\";\r\n\r\n    var paths = obj.querySelectorAll(\"path\");\r\n    var len = paths.length;\r\n\r\n    for (var i = 0; i < len; i++)  {\r\n      paths[i].style.transition = \"fill 1s\";\r\n    }\r\n  }\r\n}\r\n\r\nfunction fillSAMmap(color, skipCountry)  {\r\n// console.log(' in fillSAMap ');\r\n\r\n  if (!color) color = baseColor;\r\n  var svg;\r\n  svg = currentMap.querySelector(\"#SAMsvg\");\r\n  var svgDoc = svg.contentDocument;\r\n\r\n  for (var country in countries) {\r\n\r\n    var cc = svgDoc.getElementById(country);\r\n    if (!cc || cc === skipCountry) continue;\r\n    // console.log(country);\r\n    newFillColor(cc, color);\r\n    newStrokeColor(cc, baseStrokeColor);\r\n  }\r\n  addBirdNameToMap(\"\");\r\n}\r\n\r\nfunction newFillColor(obj, newColor) {\r\n\r\n  if (obj.nodeName === \"path\" || obj.nodeName === \"circle\") {\r\n    if (newColor === baseColor) {\r\n      obj.style.fill = \"#444\";\r\n    }\r\n    obj.style.fill = newColor;\r\n    if (newColor !== vagrantColor) obj.style.stroke = baseStrokeColor;\r\n  }\r\n\r\n  else if (obj.parentNode.nodeName === \"g\")  {\r\n\r\n    var paths = obj.querySelectorAll(\"path\");\r\n\r\n    var len = paths.length;\r\n    for (var i = 0; i < len; i++)  {\r\n\r\n      if (newColor === baseColor) {\r\n        paths[i].style.fill = \"#444\";\r\n      }\r\n\r\n      paths[i].style.fill = newColor;\r\n      if (newColor !== vagrantColor) paths[i].style.stroke = baseStrokeColor;\r\n    }\r\n  }\r\n}\r\n// eslint-disable-next-line\r\nfunction selectedCountryFillColor(selectedCountry, color)  {\r\n\r\n  var svg = currentMap.querySelector(\"#SAMsvg\");\r\n  var svgDoc = svg.contentDocument;\r\n\r\n  var cc = svgDoc.getElementById(selectedCountry);\r\n\r\n  // if (cc) {\r\n  fillSAMmap(baseColor, cc);\r\n  newFillColor(cc, color);\r\n  newStrokeColor(cc, baseStrokeColor);\r\n  // }\r\n  // else fillSAMmap(baseColor, selectedCountry);\r\n}\r\n\r\nfunction newStrokeColor(obj, newColor) {\r\n\r\n  if (obj.nodeName === \"path\" || obj.nodeName === \"circle\") {\r\n    obj.style.stroke = newColor;\r\n  }\r\n\r\n  else if (obj.parentNode.nodeName === \"g\")  {\r\n\r\n    var paths = obj.querySelectorAll(\"path\");\r\n\r\n    var len = paths.length;\r\n    for (var i = 0; i < len; i++)  {\r\n\r\n      paths[i].style.stroke = newColor;\r\n    }\r\n  }\r\n}\r\n\r\n// function selectedCountryStrokeColor(selectedCountry, color) {\r\n\r\n//   console.log(\"selectedCountryStrokeColor\");\r\n\r\n//   var svg = currentMap.querySelector(\"#SAMsvg\");\r\n//   var svgDoc = svg.contentDocument;\r\n\r\n//   var cc = svgDoc.getElementById(selectedCountry);\r\n\r\n//   if (cc) {\r\n//     newStrokeColor(cc, color);\r\n//   }\r\n// }\r\n\r\n/* global  mapsCollection saveMapButton  */\r\n// eslint-disable-next-line\r\nfunction highlightSAMmap(index, current) {\r\n  // console.log(\"in highlightSAMmap, index = \" + index);\r\n  var svg;\r\n\r\n  if (current === \"currentMap\") {\r\n    svg = currentMap.querySelector(\"#SAMsvg\");\r\n  }\r\n  else {\r\n    svg = document.getElementById(current);\r\n  }\r\n  var svgDoc = svg.contentDocument;\r\n  var cList = birds[index].split(\"-\");\r\n\r\n  for (var country in countries) {\r\n\r\n    var cc = svgDoc.getElementById(country);\r\n\r\n    if (!cc) continue;\r\n\r\n    // because the Falklands is the last country in the occurrence lists apparently split() is returning an extra character (newline?)\r\n    if (country === \"Falklands\") cList[countries[country]] = cList[countries[country]].trim();\r\n\r\n    switch (cList[countries[country]]) {\r\n\r\n    case \"X(e)\":\r\n\r\n      newFillColor(cc, endemicColor);\r\n      break;\r\n\r\n    case \"X\":\r\n\r\n      newFillColor(cc, residentColor);\r\n      break;\r\n\r\n    case \"NB\":\r\n\r\n      newFillColor(cc, nonBreederColor);\r\n      break;\r\n\r\n    case \"V\":\r\n\r\n      newFillColor(cc, vagrantColor);\r\n      newStrokeColor(cc, '#444');\r\n      break;\r\n\r\n    case \"H\":\r\n      newFillColor(cc, hypotheticalColor);\r\n      break;\r\n\r\n    case \"IN\":\r\n\r\n      newFillColor(cc, introducedColor);\r\n      break;\r\n\r\n    case \"EX\":\r\n\r\n      newFillColor(cc, extinctColor);\r\n      break;\r\n\r\n    case \"EX(e)\":\r\n\r\n      newFillColor(cc, extinctColor);\r\n      break;\r\n\r\n    default:\r\n      newFillColor(cc, baseColor);\r\n    }\r\n\r\n    if (current !== \"currentMap\")  newStrokeColor(cc, \"#fff\");\r\n  }\r\n\r\n  if ( (current === \"currentMap\") && (mapsCollection.children.length < 5) ) {  saveMapButton.style.display = \"block\";  }\r\n}\r\n"],"file":"../SouthAmerica.js"}