function onResizeWindow(){window.innerWidth<870?window.addEventListener("scroll",checkWindowScroll):window.removeEventListener("scroll",checkWindowScroll);var e=document.querySelector("#mapsCollection");e.children.length>0&&(window.innerWidth>1680?e.style.height="350px":window.innerWidth>=1600?e.style.height="300px":window.innerWidth>=1165?e.style.height="270px":e.style.height="235px")}function checkWindowScroll(){var e=document.documentElement,t=window;e.scrollHeight-t.innerHeight<=t.pageYOffset?document.getElementById("currentMap").style.opacity=0:document.getElementById("currentMap").style.opacity=1}function showCountryModal(e){countryModal.classList.add("menu-show"),countryModal.classList.add("md-show"),countryModalOpener="checklistCountryButton"===e.target.id?"checklistCountryButton":"taxonomyCountryButton"}function closeCountryModal(e){countryModal.classList.remove("menu-show"),countryModal.classList.remove("md-show"),e&&e.stopPropagation()}function toggleSampleTableShowEndemics(){sampleTable.querySelector("td.endemical").classList.toggle("showEndemics")}function toggleSampleTableSciNames(){sampleTable.classList.toggle("noScientificNames"),italics.disabled=!italics.disabled}function toggleSampleTableItalics(){sampleTable.classList.toggle("noItalics")}function toggleSampleTableLeftChecks(){[].forEach.call(sampleTable.getElementsByClassName("leftCheckBox"),function(e){e.classList.toggle("show")}),[].forEach.call(sampleTable.getElementsByClassName("familyHidden"),function(e){e.classList.toggle("show")})}function toggleSampleTableLineNumbers(){sampleTable.querySelector("td.lineNumbers").classList.toggle("showLineNumbers")}function choseCountry(e){currentChecklistCountry||map.getElementsByClassName("drawing")[0].classList.add("active"),"checklistCountryButton"===countryModalOpener?choseChecklistCountry(e):loadCountryTaxonomy(e)}function choseChecklistCountry(e){var t,n=document.body.scrollTop;closeCountryModal(),currentChecklistCountry&&(currentChecklistCountryElement.classList.remove("checkHighlight"),currentChecklistCountryElement.classList.remove("bothHighlights")),t=e.target.innerText,"A"===e.target.tagName?currentChecklistCountryElement=e.target:"SPAN"===e.target.tagName&&(currentChecklistCountryElement=e.target.parentNode),currentChecklistCountry="South America"===t?"SouthAmerica":"French Guiana"===t?"FrenchGuiana":"CuraÃ§ao"===t?"Curacao":t,checklistCountryButton.innerHTML=t,currentChecklistCountryElement.classList.add("checkHighlight"),currentChecklistCountryElement.classList.contains("taxHighlight")&&currentChecklistCountryElement.classList.add("bothHighlights"),checklistCountryButton.classList.remove("needsAttention"),checklistCountryButton.classList.add("highlight"),pdfButton.classList.add("highlight"),csvButton.classList.add("highlight"),document.body.scrollTop=n,currentMap.querySelector(".saveMapButton").style.display="none",currentMap.querySelector(".colorKey").style.opacity="0","South America"!==t?selectedCountryFillColor(currentChecklistCountry,selectedFillColor):fillSAMmap("",""),getAjax("Authors/"+currentChecklistCountry+".txt",setChecklistAuthors)}function setChecklistAuthors(e){if("SouthAmerica"===currentChecklistCountry)return checklistAuthorsPanel.innerHTML="&nbsp;&nbsp;c<a href='citations.html' target='_blank'>itation</a>s&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",void checklistAuthorsPanel.classList.add("show");var t=e.replace(/^(.*\.) \d\d\d\d\..*Version(.*$)/g,"$1 $2");checklistAuthorsPanel.innerHTML=t,checklistAuthorsPanel.classList.add("show")}function setNumDays(e){var t=e.target;t.classList.contains("highlight")||((gNumDays||0===gNumDays)&&numDaysButton.children[gNumDays+1].classList.remove("highlight"),t.classList.add("highlight"),gNumDays=parseInt(t.innerHTML),sampleTable.classList.remove(previousNumDaysClass),sampleTable.classList.add("numDays"+String(gNumDays)),previousNumDaysClass="numDays"+String(gNumDays),[].forEach.call(sampleTable.querySelectorAll("td"),function(e){e.classList.remove("cds")}),[].forEach.call(sampleTable.querySelectorAll("th"),function(e){e.classList.remove("cds")}),6===gNumDays?([].forEach.call(sampleTable.querySelectorAll("td:nth-child(6)"),function(e){e.classList.add("cds")}),sampleTable.querySelector("th:nth-child(4)").classList.add("cds")):7===gNumDays||8===gNumDays?([].forEach.call(sampleTable.querySelectorAll("td:nth-child(7)"),function(e){e.classList.add("cds")}),sampleTable.querySelector("th:nth-child(5)").classList.add("cds")):9===gNumDays||10===gNumDays?([].forEach.call(sampleTable.querySelectorAll("td:nth-child(8)"),function(e){e.classList.add("cds")}),sampleTable.querySelector("th:nth-child(6)").classList.add("cds")):11!==gNumDays&&12!==gNumDays||([].forEach.call(sampleTable.querySelectorAll("td:nth-child(8)"),function(e){e.classList.add("cds")}),sampleTable.querySelector("th:nth-child(6)").classList.add("cds"),[].forEach.call(sampleTable.querySelectorAll("td:nth-child(13)"),function(e){e.classList.add("cds")}),sampleTable.querySelector("th:nth-child(11)").classList.add("cds")),0!==gNumDays&&([].forEach.call(sampleTable.getElementsByTagName("th"),function(e){e.classList.remove("flashDays")}),sampleTable.querySelector("th:nth-child("+(gNumDays+1)+")").classList.add("flashDays")))}function getCSVText(){if(currentChecklistCountry){var e=document.createElement("form");e.setAttribute("method","post"),e.setAttribute("action","../php/sendCSV.php?country="+currentChecklistCountry),document.body.appendChild(e),e.submit(),e.remove()}else checklistCountryButton.classList.add("needsAttention")}function openChecklistPage(){var e;if(!currentChecklistCountry)return checklistCountryButton.innerHTML="Select Country",void checklistCountryButton.classList.add("needsAttention");void 0===gNumDays&&(gNumDays=12),void 0===gStartDate&&(gStartDate=1),e="?country="+currentChecklistCountry,e+="&num_days="+gNumDays,e+="&start_date="+gStartDate,e+="&line_nos="+lineNumbers.checked,e+="&left_check="+leftCheck.checked,e+="&endemics="+showEndemics.checked,e+="&sci_names="+!sciNames.checked,e+="&italics="+!italics.checked,window.open("../php/makePDF.php"+e,"_blank")}function initCurrentMap(){prepareSVGstyles("SAMsvg"),(map=document.getElementById("currentMap")).style.opacity="1"}function prepareSVGstyles(e){var t,n=(t=e.target&&"SAMsvg"===e.target.id?document.getElementById("SAMsvg"):document.getElementById(e)).contentDocument;for(var r in countries){var s=n.getElementById(r);s&&setSVGstyles(s)}}function setSVGstyles(e){if("path"===e.nodeName||"circle"===e.nodeName)e.style.transition="fill 1s";else if("g"===e.parentNode.nodeName)for(var t=e.querySelectorAll("path"),n=t.length,r=0;r<n;r++)t[r].style.transition="fill 1s"}function fillSAMmap(e,t){e||(e=baseColor);var n,r=(n=currentMap.querySelector("#SAMsvg")).contentDocument;for(var s in countries){var i=r.getElementById(s);i&&i!==t&&(newFillColor(i,e),newStrokeColor(i,baseStrokeColor))}addBirdNameToMap("")}function newFillColor(e,t){if("path"===e.nodeName||"circle"===e.nodeName)t===baseColor&&(e.style.fill="#444"),e.style.fill=t;else if("g"===e.parentNode.nodeName)for(var n=e.querySelectorAll("path"),r=n.length,s=0;s<r;s++)t===baseColor&&(n[s].style.fill="#444"),n[s].style.fill=t}function selectedCountryFillColor(e,t){var n=currentMap.querySelector("#SAMsvg").contentDocument.getElementById(e);fillSAMmap(baseColor,n),newFillColor(n,t),newStrokeColor(n,baseStrokeColor)}function newStrokeColor(e,t){if("path"===e.nodeName||"circle"===e.nodeName)e.style.stroke=t;else if("g"===e.parentNode.nodeName)for(var n=e.querySelectorAll("path"),r=n.length,s=0;s<r;s++)n[s].style.stroke=t}function highlightSAMmap(e,t){var n,r=(n="currentMap"===t?currentMap.querySelector("#SAMsvg"):document.getElementById(t)).contentDocument,s=birds[e].split("-");for(var i in countries){var o=r.getElementById(i);if(o){switch("Falklands"===i&&(s[countries[i]]=s[countries[i]].trim()),s[countries[i]]){case"X(e)":newFillColor(o,endemicColor);break;case"X":newFillColor(o,residentColor);break;case"NB":newFillColor(o,nonBreederColor);break;case"V":newFillColor(o,vagrantColor);break;case"H":newFillColor(o,hypotheticalColor);break;case"IN":newFillColor(o,introducedColor);break;case"EX":case"EX(e)":newFillColor(o,extinctColor);break;default:newFillColor(o,baseColor)}"currentMap"!==t&&newStrokeColor(o,"#fff")}}"currentMap"===t&&mapsCollection.children.length<5&&(saveMapButton.style.display="block")}function loadIntoArray(e){birds=e.split("\n")}function animateScrollTop(e){!function t(){e.scrollTop-=25,e.scrollTop>0&&setTimeout(t,25)}()}function getAjax(e,t){var n=new XMLHttpRequest;return n.open("GET",e),n.onreadystatechange=function(){n.readyState>3&&200===n.status&&t(n.responseText)},n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(),n}function showSearchInstructions(e){!0!==e&&searchInstructionsOpen?(searchSlideUpWrapper.classList.add("closeInstructions"),taxInstructionsButton.classList.add("instructionsClosed"),searchSpecials.classList.remove("open"),searchInstructionsOpen=!1,document.querySelector(".taxInstructionsButton .tooltip").innerHTML="Open"):(searchSlideUpWrapper.classList.remove("closeInstructions"),searchSpecials.classList.add("open"),searchInstructionsOpen=!0,document.querySelector(".taxInstructionsButton .tooltip").innerHTML="Close")}function loadCountryTaxonomy(e){var t;if(window.closeCountryModal(),searchSpecials.classList.contains("grayed")&&(document.querySelector("#searchForm span.grayed").classList.remove("grayed"),searchSpecials.classList.remove("grayed")),currentTaxonomyCountry&&(currentTaxonomyCountryElement.classList.remove("taxHighlight"),currentTaxonomyCountryElement.classList.remove("bothHighlights")),t=e.target.innerText,"A"===e.target.tagName?currentTaxonomyCountryElement=e.target:"SPAN"===e.target.tagName&&(currentTaxonomyCountryElement=e.target.parentNode),lastQuery&&(document.getElementById("countrySearch").classList.remove("closed"),document.getElementById("searchTerm").innerHTML=t+" : '"+lastQuery+"'"),"French Guiana"===t?(getAjax("Countries/FrenchGuianaSACC.html",updatetaxArticleQueries),searchResults.classList.remove("samTax"),taxPage.classList.remove("samTax")):"CuraÃ§ao"===t?(getAjax("Countries/CuracaoSACC.html",updatetaxArticleQueries),searchResults.classList.remove("samTax"),taxPage.classList.remove("samTax")):"South America"===t?(getAjax("Countries/SouthAmericaSACC.html",updatetaxArticleQueries),searchResults.classList.add("samTax"),searchSpecials.querySelector("span:nth-of-type(3)").classList.add("notAvailable"),searchSpecials.querySelector("span:nth-of-type(5)").classList.add("notAvailable"),searchSpecials.classList.add("SAM"),taxPage.classList.add("samTax")):t&&(getAjax("Countries/"+t+"SACC.html",updatetaxArticleQueries),searchResults.classList.remove("samTax"),taxPage.classList.remove("samTax")),"South America"===currentTaxonomyCountry&&"South America"!==t&&(searchSpecials.querySelector("span:nth-of-type(3)").classList.remove("notAvailable"),searchSpecials.querySelector("span:nth-of-type(5)").classList.remove("notAvailable"),searchSpecials.classList.remove("SAM")),lastQuery)"endemic"!==lastQuery&&"hypothetical"!==lastQuery&&"vagrant"!==lastQuery&&"incertae"!==lastQuery&&"extinct"!==lastQuery||(currentMap.querySelector(".saveMapButton").style.display="none","South America"!==t&&selectedCountryFillColor(t.replace(" ",""),selectedFillColor));else{currentMap.querySelector(".saveMapButton").style.display="none";var n=t.replace(" ","");"South America"!==t?selectedCountryFillColor(n,selectedFillColor):fillSAMmap("","")}currentTaxonomyCountry=t,taxonomyCountryButton.innerHTML=t,"Falklands"===t&&(taxonomyCountryButton.innerHTML="Malvinas"),currentTaxonomyCountryElement.classList.add("taxHighlight"),currentTaxonomyCountryElement.classList.contains("checkHighlight")&&currentTaxonomyCountryElement.classList.add("bothHighlights"),taxonomyCountryButton.classList.remove("needsAttention"),taxonomyCountryButton.classList.add("highlight"),document.querySelector("#treeIntroText").innerHTML=t+" &nbsp; : &nbsp; "+numFamiliesList[t]+" families, "+numSpeciesList[t]+" species *","Falklands"===t&&(document.querySelector("#treeIntroText").innerHTML="Falklands/Malvinas &nbsp; : &nbsp; "+numFamiliesList[t]+" families, "+numSpeciesList[t]+" species *"),document.querySelector(".colorKey").style.opacity="0.9",animateScrollTop(taxPage)}function toggleSearchResultsPanel(e){resultsPanelOpen?closeResultsPanelButton.removeEventListener("click",toggleSearchResultsPanel):closeResultsPanelButton.addEventListener("click",toggleSearchResultsPanel),searchResults.classList.toggle("fadeIn"),resultsPanel.classList.toggle("translateDown"),resultsPanelOpen=!resultsPanelOpen}function updatetaxArticleQueries(e){taxPage.innerHTML=e;var t=document.querySelector(".tax-panel");taxTreeArticleOpen?taxTreeArticleOpen=!0:t.classList.add("translateDown"),species=document.getElementById("tree").getElementsByTagName("li"),families=taxPage.querySelectorAll("#tree .familyOpen, #tree .family"),numFamilies=families.length,lastQuery&&searchTree(lastQuery),document.querySelector("#taxPageButtons").addEventListener("click",closeAllFamilies),simpleBarTaxPage=new SimpleBar(document.getElementById("taxPage"),{autoHide:!1}),resetTaxPageHeight()}function clearSearchInput(){searchInput.placeholder="",searchInput.removeEventListener("input",clearSearchInput),searchInput.removeEventListener("change",clearSearchInput),searchInput.removeEventListener("click",clearSearchInput),searchInput.removeEventListener("textInput",clearSearchInput),searchInput.removeEventListener("focusin",clearSearchInput)}function getQuery(e){var t=searchInput.value.search(/[^a-zÃ±Ã£'\s-]/i);if(-1!==t)return searchResults.innerHTML="<li></li><li> &nbsp; &nbsp; character '"+searchInput.value[t]+"' not allowed </li><li></li>",resultsPanelOpen||toggleSearchResultsPanel(e),void resetSearchResultsHeight();if(!(searchInput.value.length<2)){var n=e||window.event;if("textinput"===n.type)return searchTree(searchInput.value),n.preventDefault(),!1;"input"===n.type?searchTree(searchInput.value):"onpropertychange"===n.type&&searchTree(searchInput.value)}}function getSearchSpecialsQuery(e){searchInput.value="",searchTree(e.target.parentNode.textContent.trim())}function escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function searchTree(e){var t;e=escapeRegExp(e),document.querySelector(".colorKey").style.opacity="0.9";var n=0;if(currentTaxonomyCountry){if(resultsPanelOpen||toggleSearchResultsPanel(null),!(lastQuery=e))return searchResults.innerHTML="<li></li><li> &nbsp; &nbsp; search results will appear here</li><li></li>",resultsPanelOpen||toggleSearchResultsPanel(null),searchResults.style.top=0,void resetSearchResultsHeight();document.getElementById("countrySearch").classList.remove("closed"),document.getElementById("searchTerm").innerHTML="Falklands"===currentTaxonomyCountry?"Falklands/Malvinas : '"+lastQuery+"'":currentTaxonomyCountry+" : '"+lastQuery+"'",animateScrollTop(searchResults);for(var r=0;r<numFamilies;r++)families[r].cloned=!1;var s=!1;lastSpecies&&lastSpecies.classList.contains("active")&&lastSpecies.classList.remove("active");var i,o,a=[],l=0,c=species.length;if("endemic"===e||"hypothetical"===e||"vagrant"===e||"incertae"===e||"extinct"===e){var u;"endemic"===e?u=document.getElementById("tree").getElementsByClassName("endemic"):"extinct"===e?u=document.getElementById("tree").getElementsByClassName("extinct"):"hypothetical"===e?u=document.getElementById("tree").getElementsByClassName("hy"):"vagrant"===e?u=document.getElementById("tree").getElementsByClassName("va"):"incertae"===e&&(u=document.getElementById("tree").getElementsByClassName("ince"));for(var d=0;d<u.length;d++)!0!==u[d].parentNode.parentNode.parentNode.cloned&&(a[l++]=u[d].parentNode.parentNode.parentNode.cloneNode(!0),u[d].parentNode.parentNode.parentNode.cloned=!0),a[l++]=u[d].parentNode.cloneNode(!0)}else{if(e=e.replace(/^\s+|\s+$/g,""),e=e.replace(/n/g,"(n|Ã±)"),e=e.replace(/a/g,"(a|Ã£)"),e=e.replace(/Ãº/g,"u"),e=e.replace(/Ã¡/g,"a"),e=e.replace(/Ã³/g,"o"),e=e.replace(/Ã­/g,"i"),e=e.replace(/Ã§/g,"c"),e=e.replace(/\s+/g,"\\s+"),e?t=e:"type here"===(t=searchInput.value.replace(/^\s+|\s+$/g,""))?s=!0:""===t&&(s=!0),s)return searchResults.innerHTML="<li></li><li> &nbsp; &nbsp; no search term entered</li><li></li>",resultsPanelOpen||toggleSearchResultsPanel(null),void resetSearchResultsHeight();var h=new RegExp(t,"i");for(r=0;r<c;r++)if(i=species[r],o=i.className,i.firstChild.textContent.match(h)||i.childNodes[1].textContent.match(h)){"family"!==o&&"familyOpen"!==o||(i.cloned=!0);var p=i.parentNode.parentNode;"family"!==o&&"familyOpen"!==o&&!0!==p.cloned&&(a[l++]=p.cloneNode(!0),p.cloned=!0),a[l++]=i.cloneNode(!0)}}if(0===a.length)return searchResults.innerHTML="<li></li><li> &nbsp; &nbsp; no matching results found</li><li></li>",resultsPanelOpen||toggleSearchResultsPanel(null),void resetSearchResultsHeight();var f,m,y="";for(d=0;d<a.length;d++)if("family"===(m=a[d].className)||"familyOpen"===m){if(y+="<li class='family'><span class='fco'>",y+=a[d].firstChild.firstChild.textContent+"</span><span class='fsc'>",y+=a[d].firstChild.lastChild?a[d].firstChild.childNodes[1].textContent:" ",y+="</span></li>",1===a.length){for(f=0;f<a[0].children[1].children.length;f++)y+="<li data-i='"+a[0].children[1].children[f].getAttribute("data-i")+"' class='bird'>"+a[0].children[1].children[f].innerHTML+"</li>";n=f}}else"fsc"===m||(a[d].style.textShadow="none",y+="<li data-i='"+a[d].getAttribute("data-i")+"' class='bird'>"+a[d].innerHTML+"</li>",n++);searchResults.innerHTML=y,resultsPanelOpen||toggleSearchResultsPanel(null),lastQuery=lastQuery.replace(/\\\*/g,"*"),lastQuery=lastQuery.replace(/\\\?/g,"?"),document.getElementById("searchTerm").innerHTML="Falklands"===currentTaxonomyCountry?"Malvinas/Falklands : '"+lastQuery+"'&nbsp;&nbsp;&nbsp;   [ "+n+" species ]":currentTaxonomyCountry+" : '"+lastQuery+"'&nbsp;&nbsp;&nbsp;   [ "+n+" species ]",resetSearchResultsHeight()}else taxonomyCountryButton.classList.add("needsAttention")}function resetSearchResultsHeight(){searchResults.style.height="auto",(simpleBarResults=new SimpleBar(document.getElementById("searchResults"),{autoHide:!1})).recalculate();searchResults.scrollHeight>=300?(searchResults.style.height="325px",simpleBarResults.getScrollElement().style.maxHeight="320px"):(searchResults.style.height=searchResults.scrollHeight+35+"px",simpleBarResults.getScrollElement().style.height=searchResults.scrollHeight+35+"px"),simpleBarResults.recalculate()}function resetTaxPageHeight(){simpleBarTaxPage=new SimpleBar(taxPage,{autoHide:!1});taxPage.style.height="calc(100vh - 262px)",simpleBarTaxPage.getScrollElement().style.maxHeight="calc(100vh - 262px)",simpleBarTaxPage.recalculate()}function gotoMatch(e){currentMap.querySelector(".colorKey").style.opacity="0.9",lastSpecies&&lastSpecies.classList.contains("active")&&lastSpecies.classList.remove("active");var t=e||window.event,n=t.target,r=n.parentNode,s=n.className;if(-1===n.className.indexOf("simplebar")&&-1===n.className.indexOf("fadeIn")&&"no matching results found"!==n.textContent.replace(/^\s+|\s+$/g,"")&&"no search term entered"!==n.textContent.replace(/^\s+|\s+$/g,"")&&"search results will appear here"!==n.textContent.replace(/^\s+|\s+$/g,"")&&""!==n.textContent.replace(/^\s+|\s+$/g,"")){"family"===s?n=t.target:"fco"===s?(n=r,s="family"):"fsc"===s?(n=r,s="family"):n=null!==s.match(/co/)?r:"bird"===s?t.target:r;for(var i,o=species.length,a=n.textContent,l=0;l<o;l++){var c=(i=species[l]).textContent.split("\n")[0];if(c===a&&"family"!==s){var u=i.parentNode;u.classList.contains("open")||(u.classList.add("open"),u.parentNode.className="familyOpen"),simpleBarTaxPage.getScrollElement().scrollTop=u.parentNode.offsetTop+i.offsetTop-100,i.className="active",lastSpecies=i,highlightSAMmap(lastIndex=Number(i.getAttribute("data-i")),"currentMap"),lastResultsSpecies&&lastResultsSpecies.classList.toggle("active"),n.classList.toggle("active"),lastResultsSpecies=n,addBirdNameToMap(i);break}if(c===a&&"family"===s){simpleBarTaxPage.getScrollElement().scrollTop=i.offsetTop,(lastSpecies=i.firstChild).classList.toggle("active"),lastResultsSpecies&&(lastResultsSpecies.classList.toggle("active"),lastResultsSpecies=null);break}}}}function addBirdNameToMap(e){var t="";e?(t="<span>"+e.firstChild.textContent+"</span><br/><span>"+e.lastChild.textContent+"</span>",document.getElementById("currentBirdName").innerHTML=t):document.getElementById("currentBirdName").innerHTML=t}function toggleFamilyOpen(e){if(-1===e.target.className.indexOf("simplebar")&&"taxPage"!==e.target.id&&numFamilies){document.querySelector(".colorKey").style.opacity="0.9";var t,n=(e=e||window.event).target,r=n.className;if("family"===r||"familyOpen"===r?t=e.target.childNodes[1].nextSibling:"fco"===r?t=e.target.parentNode.nextSibling.nextSibling:"fsc"===r?t=e.target.parentNode.nextSibling.nextSibling:"fTitle"!==r&&"fTitle active"!==r||(t=e.target.nextSibling.nextSibling),t&&!t.classList.contains("open")){t.classList.add("open"),t.parentNode.className="familyOpen";var s=taxPage.getBoundingClientRect().height;t.offsetTop-taxPage.scrollTop>s-24&&(t.parentNode.clientHeight>s?taxPage.scrollTop=t.parentNode.offsetTop:taxPage.scrollTop+=t.lastElementChild.offsetTop+t.lastElementChild.clientHeight),document.querySelector("#treeIntroText").innerHTML=currentTaxonomyCountry+"  &nbsp; : &nbsp; "+t.parentNode.firstChild.children[1].textContent+" has "+t.children.length+" species"}else if(t){t.classList.remove("open"),t.parentNode.className="family";var i=t.parentNode.querySelectorAll(".active");i.length&&i[0].classList.remove("active"),document.querySelector("#treeIntroText").innerHTML=currentTaxonomyCountry+"   &nbsp; : &nbsp; "+numFamiliesList[currentTaxonomyCountry]+" families, "+numSpeciesList[currentTaxonomyCountry]+" species"}t||(n.parentNode.classList.contains("birds")&&(n=n.firstChild),n.parentNode.className="active",n.parentNode!==lastSpecies&&lastSpecies&&lastSpecies.classList.contains("active")&&lastSpecies.classList.remove("active"),lastSpecies=n.parentNode,lastResultsSpecies&&lastResultsSpecies.classList.toggle("active"),lastResultsSpecies=null,addBirdNameToMap(n.parentNode),highlightSAMmap(lastIndex=Number(n.parentNode.getAttribute("data-i")),"currentMap"),document.querySelector("#treeIntroText").innerHTML=currentTaxonomyCountry+"   &nbsp; : &nbsp; "+numFamiliesList[currentTaxonomyCountry]+" families, "+numSpeciesList[currentTaxonomyCountry]+" species *"),taxPage.style.zIndex=5}}function closeAllFamilies(){for(var e=taxPage.querySelectorAll("#tree .familyOpen ul"),t=e.length,n=0;n<t;n++)e[n].classList.remove("open"),e[n].classList.add("closed"),e[n].parentNode.className="family";document.querySelector("#treeIntroText").innerHTML=currentTaxonomyCountry+"   &nbsp; : "+numFamiliesList[currentTaxonomyCountry]+" families, "+numSpeciesList[currentTaxonomyCountry]+" species *"}function revealMapsCollection(e){mapsCollection.classList.toggle("open"),map.classList.toggle("shiftUp")}function deleteMap(e){e.stopPropagation(),this.parentNode.parentNode.removeChild(this.parentNode),map.querySelector(".saveMapButton").style.display="block",0===mapsCollection.getElementsByClassName("thinify smallBird").length&&(mapsCollection.classList.remove("namesOnlySeen"),mapsCollection.removeEventListener("click",revealMapsCollection),deleteAllMapsButton.removeEventListener("click",deleteAllMaps),mapsCollection.classList.remove("open"),map.classList.remove("shiftUp"))}function saveCurrentMap(){var e=mapsCollection.getElementsByClassName("thinify smallBird").length;if(5!==e){var t=map.children[0].cloneNode(!0);t.classList.remove("birdMapInstance"),t.classList.add("thinify"),t.classList.add("smallBird"),t.querySelector(".birdName").classList.add("smallBirdText"),t.querySelector(".colorKey").style.opacity="0",t.querySelector(".colorKey").style.display="none",t.querySelector(".birdName").removeAttribute("id"),t.querySelector(".drawing").removeAttribute("id"),t.querySelector(".drawing").classList.add("smallBirdDrawing"),t.querySelector(".drawing").firstElementChild.setAttribute("id","thin"+currentID),t.removeAttribute("id"),0===e?(mapsCollection.addEventListener("click",revealMapsCollection),mapsCollection.classList.add("namesOnlySeen"),(deleteAllMapsButton=document.getElementById("deleteAllMapsButton")).addEventListener("click",deleteAllMaps)):4===e&&(map.querySelector(".saveMapButton").style.display="none"),mapsCollection.appendChild(t),(deleteMapButton=t.querySelector(".deleteMapButton")).addEventListener("click",deleteMap),document.getElementById("thin"+currentID).onload=function(){highlightSAMmap(lastIndex,"thin"+currentID),t.querySelector(".birdName.smallBirdText").classList.add("highlightName"),mapsCollection.lastChild.style.opacity="1",currentID++}}}function deleteAllMaps(e){e.stopPropagation();for(var t=mapsCollection.getElementsByClassName("thinify smallBird").length,n=1;n<=t;n++)mapsCollection.removeChild(mapsCollection.childNodes[3]);mapsCollection.classList.remove("namesOnlySeen"),mapsCollection.removeEventListener("click",revealMapsCollection),deleteAllMapsButton.removeEventListener("click",deleteAllMaps),mapsCollection.classList.remove("open"),map.classList.remove("shiftUp"),map.querySelector(".saveMapButton").style.display="block"}!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SimpleBar=t():e.SimpleBar=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var s=n[r]={exports:{},id:r,loaded:!1};return e[r].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=r(n(32)),i=r(n(29)),o=r(n(30)),a=r(n(33)),l=r(n(34)),c=r(n(72)),u=r(n(70)),d=r(n(71));n(69);var h=function(){function e(t,n){(0,a.default)(this,e),this.el=t,this.flashTimeout,this.contentEl,this.scrollContentEl,this.dragOffset={x:0,y:0},this.isVisible={x:!0,y:!0},this.scrollOffsetAttr={x:"scrollLeft",y:"scrollTop"},this.sizeAttr={x:"offsetWidth",y:"offsetHeight"},this.scrollSizeAttr={x:"scrollWidth",y:"scrollHeight"},this.offsetAttr={x:"left",y:"top"},this.globalObserver,this.mutationObserver,this.resizeObserver,this.currentAxis,this.options=(0,o.default)({},e.defaultOptions,n),this.classNames=this.options.classNames,this.scrollbarWidth=(0,c.default)(),this.offsetSize=20,this.flashScrollbar=this.flashScrollbar.bind(this),this.onDragY=this.onDragY.bind(this),this.onDragX=this.onDragX.bind(this),this.onScrollY=this.onScrollY.bind(this),this.onScrollX=this.onScrollX.bind(this),this.drag=this.drag.bind(this),this.onEndDrag=this.onEndDrag.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.recalculate=(0,u.default)(this.recalculate,100,{leading:!0,trailing:!1}),this.init()}return(0,l.default)(e,[{key:"init",value:function(){this.el.SimpleBar=this,this.initDOM(),this.scrollbarX=this.trackX.querySelector("."+this.classNames.scrollbar),this.scrollbarY=this.trackY.querySelector("."+this.classNames.scrollbar),this.scrollContentEl.style.paddingRight=(this.scrollbarWidth||this.offsetSize)+"px",this.scrollContentEl.style.marginBottom="-"+(2*this.scrollbarWidth||this.offsetSize)+"px",this.contentEl.style.paddingBottom=(this.scrollbarWidth||this.offsetSize)+"px",0!==this.scrollbarWidth&&(this.contentEl.style.marginRight="-"+this.scrollbarWidth+"px"),this.recalculate(),this.initListeners()}},{key:"initDOM",value:function(){var e=this;if((0,i.default)(this.el.children).find(function(t){return t.classList.contains(e.classNames.scrollContent)}))this.trackX=this.el.querySelector("."+this.classNames.track+".horizontal"),this.trackY=this.el.querySelector("."+this.classNames.track+".vertical"),this.scrollContentEl=this.el.querySelector("."+this.classNames.scrollContent),this.contentEl=this.el.querySelector("."+this.classNames.content);else{for(this.scrollContentEl=document.createElement("div"),this.contentEl=document.createElement("div"),this.scrollContentEl.classList.add(this.classNames.scrollContent),this.contentEl.classList.add(this.classNames.content);this.el.firstChild;)this.contentEl.appendChild(this.el.firstChild);this.scrollContentEl.appendChild(this.contentEl),this.el.appendChild(this.scrollContentEl)}if(!this.trackX||!this.trackY){var t=document.createElement("div"),n=document.createElement("div");t.classList.add(this.classNames.track),n.classList.add(this.classNames.scrollbar),t.appendChild(n),this.trackX=t.cloneNode(!0),this.trackX.classList.add("horizontal"),this.trackY=t.cloneNode(!0),this.trackY.classList.add("vertical"),this.el.insertBefore(this.trackX,this.el.firstChild),this.el.insertBefore(this.trackY,this.el.firstChild)}this.el.setAttribute("data-simplebar","init")}},{key:"initListeners",value:function(){var e=this;this.options.autoHide&&this.el.addEventListener("mouseenter",this.onMouseEnter),this.scrollbarY.addEventListener("mousedown",this.onDragY),this.scrollbarX.addEventListener("mousedown",this.onDragX),this.scrollContentEl.addEventListener("scroll",this.onScrollY),this.contentEl.addEventListener("scroll",this.onScrollX),"undefined"!=typeof MutationObserver&&(this.mutationObserver=new MutationObserver(function(t){t.forEach(function(t){(e.isChildNode(t.target)||t.addedNodes.length)&&e.recalculate()})}),this.mutationObserver.observe(this.el,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this.resizeObserver=new d.default(this.recalculate.bind(this)),this.resizeObserver.observe(this.el)}},{key:"removeListeners",value:function(){this.options.autoHide&&this.el.removeEventListener("mouseenter",this.onMouseEnter),this.scrollbarX.removeEventListener("mousedown",this.onDragX),this.scrollbarY.removeEventListener("mousedown",this.onDragY),this.scrollContentEl.removeEventListener("scroll",this.onScrollY),this.contentEl.removeEventListener("scroll",this.onScrollX),this.mutationObserver.disconnect(),this.resizeObserver.disconnect()}},{key:"onDragX",value:function(e){this.onDrag(e,"x")}},{key:"onDragY",value:function(e){this.onDrag(e,"y")}},{key:"onDrag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";e.preventDefault();var n="y"===t?this.scrollbarY:this.scrollbarX,r="y"===t?e.pageY:e.pageX;this.dragOffset[t]=r-n.getBoundingClientRect()[this.offsetAttr[t]],this.currentAxis=t,document.addEventListener("mousemove",this.drag),document.addEventListener("mouseup",this.onEndDrag)}},{key:"drag",value:function(e){var t=void 0,n=void 0,r=void 0;e.preventDefault(),"y"===this.currentAxis?(t=e.pageY,n=this.trackY,r=this.scrollContentEl):(t=e.pageX,n=this.trackX,r=this.contentEl);var s=(t-n.getBoundingClientRect()[this.offsetAttr[this.currentAxis]]-this.dragOffset[this.currentAxis])/n[this.sizeAttr[this.currentAxis]]*this.contentEl[this.scrollSizeAttr[this.currentAxis]];r[this.scrollOffsetAttr[this.currentAxis]]=s}},{key:"onEndDrag",value:function(){document.removeEventListener("mousemove",this.drag),document.removeEventListener("mouseup",this.onEndDrag)}},{key:"resizeScrollbar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y",t=void 0,n=void 0,r=void 0,s=void 0,i=void 0;"x"===e?(t=this.trackX,n=this.scrollbarX,r=this.contentEl[this.scrollOffsetAttr[e]],s=this.contentSizeX,i=this.scrollbarXSize):(t=this.trackY,n=this.scrollbarY,r=this.scrollContentEl[this.scrollOffsetAttr[e]],s=this.contentSizeY,i=this.scrollbarYSize);var o=i/s,a=r/(s-i),l=Math.max(~~(o*(i-2))-2,this.options.scrollbarMinSize),c=~~((i-4-l)*a+2);this.isVisible[e]=i<s,this.isVisible[e]?(t.style.visibility="visible","x"===e?(n.style.left=c+"px",n.style.width=l+"px"):(n.style.top=c+"px",n.style.height=l+"px")):t.style.visibility="hidden"}},{key:"onScrollX",value:function(){this.flashScrollbar("x")}},{key:"onScrollY",value:function(){this.flashScrollbar("y")}},{key:"onMouseEnter",value:function(){this.flashScrollbar("x"),this.flashScrollbar("y")}},{key:"flashScrollbar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";this.resizeScrollbar(e),this.showScrollbar(e)}},{key:"showScrollbar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";this.isVisible[e]&&("x"===e?this.scrollbarX.classList.add("visible"):this.scrollbarY.classList.add("visible"),this.options.autoHide&&("number"==typeof this.flashTimeout&&window.clearTimeout(this.flashTimeout),this.flashTimeout=window.setTimeout(this.hideScrollbar.bind(this),1e3)))}},{key:"hideScrollbar",value:function(){this.scrollbarX.classList.remove("visible"),this.scrollbarY.classList.remove("visible"),"number"==typeof this.flashTimeout&&window.clearTimeout(this.flashTimeout)}},{key:"recalculate",value:function(){this.contentSizeX=this.contentEl[this.scrollSizeAttr.x],this.contentSizeY=this.contentEl[this.scrollSizeAttr.y]-(this.scrollbarWidth||this.offsetSize),this.scrollbarXSize=this.trackX[this.sizeAttr.x],this.scrollbarYSize=this.trackY[this.sizeAttr.y],this.resizeScrollbar("x"),this.resizeScrollbar("y"),this.options.autoHide||(this.showScrollbar("x"),this.showScrollbar("y"))}},{key:"getScrollElement",value:function(){return this.scrollContentEl}},{key:"getContentElement",value:function(){return this.contentEl}},{key:"unMount",value:function(){this.removeListeners(),this.el.SimpleBar=null}},{key:"isChildNode",value:function(e){return null!==e&&(e===this.el||this.isChildNode(e.parentNode))}}],[{key:"initHtmlApi",value:function(){this.initDOMLoadedElements=this.initDOMLoadedElements.bind(this),"undefined"!=typeof MutationObserver&&(this.globalObserver=new MutationObserver(function(t){t.forEach(function(t){(0,i.default)(t.addedNodes).forEach(function(t){1===t.nodeType&&(t.hasAttribute("data-simplebar")?!t.SimpleBar&&new e(t,e.getElOptions(t)):(0,i.default)(t.querySelectorAll("[data-simplebar]")).forEach(function(t){!t.SimpleBar&&new e(t,e.getElOptions(t))}))}),(0,i.default)(t.removedNodes).forEach(function(e){1===e.nodeType&&(e.hasAttribute("data-simplebar")?e.SimpleBar&&e.SimpleBar.unMount():(0,i.default)(e.querySelectorAll("[data-simplebar]")).forEach(function(e){e.SimpleBar&&e.SimpleBar.unMount()}))})})}),this.globalObserver.observe(document,{childList:!0,subtree:!0})),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(this.initDOMLoadedElements.bind(this)):(document.addEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.addEventListener("load",this.initDOMLoadedElements))}},{key:"getElOptions",value:function(t){return(0,s.default)(e.htmlAttributes).reduce(function(n,r){var s=e.htmlAttributes[r];return t.hasAttribute(s)&&(n[r]=JSON.parse(t.getAttribute(s)||!0)),n},{})}},{key:"removeObserver",value:function(){this.globalObserver.disconnect()}},{key:"initDOMLoadedElements",value:function(){document.removeEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.removeEventListener("load",this.initDOMLoadedElements),(0,i.default)(document.querySelectorAll("[data-simplebar]")).forEach(function(t){t.SimpleBar||new e(t,e.getElOptions(t))})}},{key:"defaultOptions",get:function(){return{autoHide:!0,classNames:{content:"simplebar-content",scrollContent:"simplebar-scroll-content",scrollbar:"simplebar-scrollbar",track:"simplebar-track"},scrollbarMinSize:25}}},{key:"htmlAttributes",get:function(){return{autoHide:"data-simplebar-autohide",scrollbarMinSize:"data-simplebar-scrollbar-min-size"}}}]),e}();t.default=h,h.initHtmlApi(),e.exports=t.default},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(25)("wks"),s=n(28),i=n(5).Symbol,o="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=o&&i[e]||(o?i:s)("Symbol."+e))}).store=r},function(e,t,n){e.exports=!n(8)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(5),s=n(1),i=n(20),o=n(10),a="prototype",l=function(e,t,n){var c,u,d,h=e&l.F,p=e&l.G,f=e&l.S,m=e&l.P,y=e&l.B,v=e&l.W,g=p?s:s[t]||(s[t]={}),b=g[a],S=p?r:f?r[t]:(r[t]||{})[a];p&&(n=t);for(c in n)(u=!h&&S&&void 0!==S[c])&&c in g||(d=u?S[c]:n[c],g[c]=p&&"function"!=typeof S[c]?n[c]:y&&u?i(d,r):v&&S[c]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[a]=e[a],t}(d):m&&"function"==typeof d?i(Function.call,d):d,m&&((g.virtual||(g.virtual={}))[c]=d,e&l.R&&b&&!b[c]&&o(b,c,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(7),s=n(44),i=n(62),o=Object.defineProperty;t.f=n(3)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),s)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(13);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(6),s=n(16);e.exports=n(3)?function(e,t,n){return r.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(12);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports={}},function(e,t,n){var r=n(56),s=n(22);e.exports=Object.keys||function(e){return r(e,s)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(25)("keys"),s=n(28);e.exports=function(e){return r[e]||(r[e]=s(e))}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(39);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,s){return e.call(t,n,r,s)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(13),s=n(5).document,i=r(s)&&r(s.createElement);e.exports=function(e){return i?s.createElement(e):{}}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(19);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(6).f,s=n(9),i=n(2)("toStringTag");e.exports=function(e,t,n){e&&!s(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){var r=n(5),s="__core-js_shared__",i=r[s]||(r[s]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,n){var r=n(23),s=n(12);e.exports=function(e){return r(s(e))}},function(e,t,n){var r=n(18),s=Math.min;e.exports=function(e){return e>0?s(r(e),9007199254740991):0}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){e.exports={default:n(35),__esModule:!0}},function(e,t,n){e.exports={default:n(36),__esModule:!0}},function(e,t,n){e.exports={default:n(37),__esModule:!0}},function(e,t,n){e.exports={default:n(38),__esModule:!0}},function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(31));t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),(0,r.default)(e,s.key,s)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){n(68),n(64),e.exports=n(1).Array.from},function(e,t,n){n(65),e.exports=n(1).Object.assign},function(e,t,n){n(66);var r=n(1).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){n(67),e.exports=n(1).Object.keys},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(26),s=n(27),i=n(61);e.exports=function(e){return function(t,n,o){var a,l=r(t),c=s(l.length),u=i(o,c);if(e&&n!=n){for(;c>u;)if((a=l[u++])!=a)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}},function(e,t,n){var r=n(19),s=n(2)("toStringTag"),i="Arguments"==r(function(){return arguments}()),o=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=o(t=Object(e),s))?n:i?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){"use strict";var r=n(6),s=n(16);e.exports=function(e,t,n){t in e?r.f(e,t,s(0,n)):e[t]=n}},function(e,t,n){e.exports=n(5).document&&document.documentElement},function(e,t,n){e.exports=!n(3)&&!n(8)(function(){return 7!=Object.defineProperty(n(21)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(14),s=n(2)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[s]===e)}},function(e,t,n){var r=n(7);e.exports=function(e,t,n,s){try{return s?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},function(e,t,n){"use strict";var r=n(52),s=n(16),i=n(24),o={};n(10)(o,n(2)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(o,{next:s(1,n)}),i(e,t+" Iterator")}},function(e,t,n){"use strict";var r=n(50),s=n(4),i=n(59),o=n(10),a=n(9),l=n(14),c=n(47),u=n(24),d=n(55),h=n(2)("iterator"),p=!([].keys&&"next"in[].keys()),f="keys",m="values",y=function(){return this};e.exports=function(e,t,n,v,g,b,S){c(n,t,v);var C,x,E,L=function(e){if(!p&&e in M)return M[e];switch(e){case f:case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},T=t+" Iterator",k=g==m,w=!1,M=e.prototype,B=M[h]||M["@@iterator"]||g&&M[g],N=B||L(g),A=g?k?L("entries"):N:void 0,O="Array"==t?M.entries||B:B;if(O&&(E=d(O.call(new e)))!==Object.prototype&&(u(E,T,!0),r||a(E,h)||o(E,h,y)),k&&B&&B.name!==m&&(w=!0,N=function(){return B.call(this)}),r&&!S||!p&&!w&&M[h]||o(M,h,N),l[t]=N,l[T]=y,g)if(C={values:k?N:L(m),keys:b?N:L(f),entries:A},S)for(x in C)x in M||i(M,x,C[x]);else s(s.P+s.F*(p||w),t,C);return C}},function(e,t,n){var r=n(2)("iterator"),s=!1;try{var i=[7][r]();i.return=function(){s=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!s)return!1;var n=!1;try{var i=[7],o=i[r]();o.next=function(){return{done:n=!0}},i[r]=function(){return o},e(i)}catch(e){}return n}},function(e,t){e.exports=!0},function(e,t,n){"use strict";var r=n(15),s=n(54),i=n(57),o=n(11),a=n(23),l=Object.assign;e.exports=!l||n(8)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r})?function(e,t){for(var n=o(e),l=arguments.length,c=1,u=s.f,d=i.f;l>c;)for(var h,p=a(arguments[c++]),f=u?r(p).concat(u(p)):r(p),m=f.length,y=0;m>y;)d.call(p,h=f[y++])&&(n[h]=p[h]);return n}:l},function(e,t,n){var r=n(7),s=n(53),i=n(22),o=n(17)("IE_PROTO"),a=function(){},l="prototype",c=function(){var e,t=n(21)("iframe"),r=i.length;for(t.style.display="none",n(43).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;r--;)delete c[l][i[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(a[l]=r(e),n=new a,a[l]=null,n[o]=e):n=c(),void 0===t?n:s(n,t)}},function(e,t,n){var r=n(6),s=n(7),i=n(15);e.exports=n(3)?Object.defineProperties:function(e,t){s(e);for(var n,o=i(t),a=o.length,l=0;a>l;)r.f(e,n=o[l++],t[n]);return e}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(9),s=n(11),i=n(17)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=s(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,n){var r=n(9),s=n(26),i=n(40)(!1),o=n(17)("IE_PROTO");e.exports=function(e,t){var n,a=s(e),l=0,c=[];for(n in a)n!=o&&r(a,n)&&c.push(n);for(;t.length>l;)r(a,n=t[l++])&&(~i(c,n)||c.push(n));return c}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(4),s=n(1),i=n(8);e.exports=function(e,t){var n=(s.Object||{})[e]||Object[e],o={};o[e]=t(n),r(r.S+r.F*i(function(){n(1)}),"Object",o)}},function(e,t,n){e.exports=n(10)},function(e,t,n){var r=n(18),s=n(12);e.exports=function(e){return function(t,n){var i,o,a=String(s(t)),l=r(n),c=a.length;return l<0||l>=c?e?"":void 0:(i=a.charCodeAt(l),i<55296||i>56319||l+1===c||(o=a.charCodeAt(l+1))<56320||o>57343?e?a.charAt(l):i:e?a.slice(l,l+2):o-56320+(i-55296<<10)+65536)}}},function(e,t,n){var r=n(18),s=Math.max,i=Math.min;e.exports=function(e,t){return e=r(e),e<0?s(e+t,0):i(e,t)}},function(e,t,n){var r=n(13);e.exports=function(e,t){if(!r(e))return e;var n,s;if(t&&"function"==typeof(n=e.toString)&&!r(s=n.call(e)))return s;if("function"==typeof(n=e.valueOf)&&!r(s=n.call(e)))return s;if(!t&&"function"==typeof(n=e.toString)&&!r(s=n.call(e)))return s;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(41),s=n(2)("iterator"),i=n(14);e.exports=n(1).getIteratorMethod=function(e){if(void 0!=e)return e[s]||e["@@iterator"]||i[r(e)]}},function(e,t,n){"use strict";var r=n(20),s=n(4),i=n(11),o=n(46),a=n(45),l=n(27),c=n(42),u=n(63);s(s.S+s.F*!n(49)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,s,d,h=i(e),p="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,y=void 0!==m,v=0,g=u(h);if(y&&(m=r(m,f>2?arguments[2]:void 0,2)),void 0==g||p==Array&&a(g))for(t=l(h.length),n=new p(t);t>v;v++)c(n,v,y?m(h[v],v):h[v]);else for(d=g.call(h),n=new p;!(s=d.next()).done;v++)c(n,v,y?o(d,m,[s.value,v],!0):s.value);return n.length=v,n}})},function(e,t,n){var r=n(4);r(r.S+r.F,"Object",{assign:n(51)})},function(e,t,n){var r=n(4);r(r.S+r.F*!n(3),"Object",{defineProperty:n(6).f})},function(e,t,n){var r=n(11),s=n(15);n(58)("keys",function(){return function(e){return s(r(e))}})},function(e,t,n){"use strict";var r=n(60)(!0);n(48)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t){},function(e,t){(function(t){function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function r(e){return!!e&&"object"==typeof e}function s(e){return"symbol"==typeof e||r(e)&&v.call(e)==l}function i(e){if("number"==typeof e)return e;if(s(e))return a;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(c,"");var r=d.test(e);return r||h.test(e)?p(e.slice(2),r?2:8):u.test(e)?a:+e}var o="Expected a function",a=NaN,l="[object Symbol]",c=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,h=/^0o[0-7]+$/i,p=parseInt,f="object"==typeof t&&t&&t.Object===Object&&t,m="object"==typeof self&&self&&self.Object===Object&&self,y=f||m||Function("return this")(),v=Object.prototype.toString,g=Math.max,b=Math.min,S=function(){return y.Date.now()};e.exports=function(e,t,r){function s(t){var n=p,r=f;return p=f=void 0,x=t,y=e.apply(r,n)}function a(e){return x=e,v=setTimeout(u,t),E?s(e):y}function l(e){var n=e-x,r=t-(e-C);return L?b(r,m-n):r}function c(e){var n=e-C,r=e-x;return void 0===C||n>=t||n<0||L&&r>=m}function u(){var e=S();return c(e)?d(e):void(v=setTimeout(u,l(e)))}function d(e){return v=void 0,T&&p?s(e):(p=f=void 0,y)}function h(){var e=S(),n=c(e);if(p=arguments,f=this,C=e,n){if(void 0===v)return a(C);if(L)return v=setTimeout(u,t),s(C)}return void 0===v&&(v=setTimeout(u,t)),y}var p,f,m,y,v,C,x=0,E=!1,L=!1,T=!0;if("function"!=typeof e)throw new TypeError(o);return t=i(t)||0,n(r)&&(E=!!r.leading,L="maxWait"in r,m=L?g(i(r.maxWait)||0,t):m,T="trailing"in r?!!r.trailing:T),h.cancel=function(){void 0!==v&&clearTimeout(v),x=0,p=C=f=v=void 0},h.flush=function(){return void 0===v?y:d(S())},h}}).call(t,function(){return this}())},function(e,t,n){(function(t){!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e){return parseFloat(e)||0}function n(t){return Array.prototype.slice.call(arguments,1).reduce(function(n,r){return n+e(t["border-"+r+"-width"])},0)}function r(t){for(var n={},r=0,s=["top","right","bottom","left"];r<s.length;r+=1){var i=s[r],o=t["padding-"+i];n[i]=e(o)}return n}function s(e){var t=e.getBBox();return c(0,0,t.width,t.height)}function i(t){var s=t.clientWidth,i=t.clientHeight;if(!s&&!i)return S;var a=getComputedStyle(t),l=r(a),u=l.left+l.right,d=l.top+l.bottom,h=e(a.width),p=e(a.height);if("border-box"===a.boxSizing&&(Math.round(h+u)!==s&&(h-=n(a,"left","right")+u),Math.round(p+d)!==i&&(p-=n(a,"top","bottom")+d)),!o(t)){var f=Math.round(h+u)-s,m=Math.round(p+d)-i;1!==Math.abs(f)&&(h-=f),1!==Math.abs(m)&&(p-=m)}return c(l.left,l.top,h,p)}function o(e){return e===document.documentElement}function a(e){return h?C(e)?s(e):i(e):S}function l(e){var t=e.x,n=e.y,r=e.width,s=e.height,i="function"==typeof DOMRectReadOnly?DOMRectReadOnly:Object,o=Object.create(i.prototype);return b(o,{x:t,y:n,width:r,height:s,top:n,right:t+r,bottom:s+n,left:t}),o}function c(e,t,n,r){return{x:e,y:t,width:n,height:r}}var u=void 0!==t&&t.Math===Math?t:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),d=function(){function e(e,t){var n=-1;return e.some(function(e,r){return e[0]===t&&(n=r,!0)}),n}return"function"==typeof u.Map?u.Map:function(){function t(){this.__entries__=[]}var n={size:{}};return n.size.get=function(){return this.__entries__.length},t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){var n=this;void 0===t&&(t=null);for(var r=0,s=n.__entries__;r<s.length;r+=1){var i=s[r];e.call(t,i[1],i[0])}},Object.defineProperties(t.prototype,n),t}()}(),h=u.window===u&&"undefined"!=typeof document,p="function"==typeof requestAnimationFrame?requestAnimationFrame:function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},f=2,m=function(){var e=Date;return"object"==typeof performance&&"function"==typeof performance.now&&(e=performance),function(){return e.now()}}(),y=function(e,t,n){function r(){o=!1,e(),a&&i()}function s(){n?p(r):r()}function i(){var e=m();if(o){if(e-l<f)return;a=!0}else o=!0,a=!1,setTimeout(s,t);l=e}void 0===n&&(n=!1);var o=!1,a=!1,l=0;return i},v="function"==typeof MutationObserver&&"object"==typeof navigator&&!("Netscape"===navigator.appName&&navigator.userAgent.match(/Trident\/.*rv:11/)),g=function(){this.isCycleContinuous_=!v,this.listenersEnabled_=!1,this.mutationsObserver_=null,this.observers_=[],this.refresh=y(this.refresh.bind(this),20,!0),this.continuousUpdateHandler_=y(this.refresh,80)};g.prototype.connect=function(e){this.isConnected(e)||this.observers_.push(e),this.listenersEnabled_||this.addListeners_()},g.prototype.disconnect=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.listenersEnabled_&&this.removeListeners_()},g.prototype.isConnected=function(e){return!!~this.observers_.indexOf(e)},g.prototype.refresh=function(){this.updateObservers_()?this.refresh():this.isCycleContinuous_&&this.listenersEnabled_&&this.continuousUpdateHandler_()},g.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},g.prototype.addListeners_=function(){h&&!this.listenersEnabled_&&(window.addEventListener("resize",this.refresh),document.addEventListener("transitionend",this.refresh),v&&(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this.listenersEnabled_=!0,this.isCycleContinuous_&&this.refresh())},g.prototype.removeListeners_=function(){h&&this.listenersEnabled_&&(window.removeEventListener("resize",this.refresh),document.removeEventListener("transitionend",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationsObserver_=null,this.listenersEnabled_=!1)};var b=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n+=1){var s=r[n];Object.defineProperty(e,s,{value:t[s],enumerbale:!1,writable:!1,configurable:!0})}return e},S=c(0,0,0,0),C="function"==typeof SVGGraphicsElement?function(e){return e instanceof SVGGraphicsElement}:function(e){return e instanceof SVGElement&&"function"==typeof e.getBBox},x=function(e){this.target=e,this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=c(0,0,0,0)};x.prototype.isActive=function(){var e=a(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},x.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e};var E=function(e,t){var n=l(t);b(this,{target:e,contentRect:n})},L=function(e,t,n){if("function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.activeTargets_=[],this.observationTargets_=new d,this.callback_=e,this.controller_=t,this.callbackCtx_=n};L.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("Element"in u&&Element instanceof Object){if(!(e instanceof Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observationTargets_;t.has(e)||(t.set(e,new x(e)),this.controller_.isConnected(this)||this.controller_.connect(this),this.controller_.refresh())}},L.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("Element"in u&&Element instanceof Object){if(!(e instanceof Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observationTargets_;t.has(e)&&(t.delete(e),t.size||this.controller_.disconnect(this))}},L.prototype.disconnect=function(){this.clearActive(),this.observationTargets_.clear(),this.controller_.disconnect(this)},L.prototype.gatherActive=function(){this.clearActive();var e=this.activeTargets_;this.observationTargets_.forEach(function(t){t.isActive()&&e.push(t)})},L.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeTargets_.map(function(e){return new E(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},L.prototype.clearActive=function(){this.activeTargets_.splice(0)},L.prototype.hasActive=function(){return this.activeTargets_.length>0};var T=new g,k="function"==typeof WeakMap?new WeakMap:new d,w=function(e){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=new L(e,T,this);k.set(this,t)};return["observe","unobserve","disconnect"].forEach(function(e){w.prototype[e]=function(){var t;return(t=k.get(this))[e].apply(t,arguments)}}),"function"==typeof u.ResizeObserver?u.ResizeObserver:w})}).call(t,function(){return this}())},function(e,t,n){var r,s,i;!function(n,o){s=[],void 0!==(i="function"==typeof(r=o)?r.apply(t,s):r)&&(e.exports=i)}(0,function(){"use strict";return function(){var e,t=document.body,n=document.createElement("div"),r=n.style;return r.position="absolute",r.top=r.left="-9999px",r.width=r.height="100px",r.overflow="scroll",t.appendChild(n),e=n.offsetWidth-n.clientWidth,t.removeChild(n),e}})}])});var sampleTable,leftCheck,sciNames,italics,lineNumbers,showEndemics,currentChecklistCountry,currentChecklistCountryElement,checklistAuthorsPanel,countryModalOverlay,countryModalOpener,countryModal,gNumDays,gStartDate,previousNumDaysClass,numDaysButton,checklistCountryButton,pdfButton,csvButton,taxonomyCountryButton;document.addEventListener("DOMContentLoaded",function(){window.addEventListener("resize",onResizeWindow),(countryModalOverlay=document.querySelector(".md-overlay")).addEventListener("click",closeCountryModal),checklistCountryButton=document.getElementById("checklistCountryButton"),taxonomyCountryButton=document.getElementById("taxonomyCountryButton"),checklistCountryButton.addEventListener("click",showCountryModal),taxonomyCountryButton.addEventListener("click",showCountryModal),(numDaysButton=document.getElementById("numDays")).addEventListener("click",setNumDays),numDaysButton.children.item(11).classList.add("highlight"),gNumDays=10,(sampleTable=document.getElementById("sampleTable")).classList.add("numDays"+String(gNumDays)),previousNumDaysClass="numDays"+String(gNumDays),(pdfButton=document.getElementById("pdfButton")).addEventListener("click",openChecklistPage),(csvButton=document.getElementById("csvButton")).addEventListener("click",getCSVText),lineNumbers=document.getElementById("lineNumbers"),leftCheck=document.getElementById("leftCheck"),showEndemics=document.getElementById("showEndemics"),sciNames=document.getElementById("sciNames"),italics=document.getElementById("italics"),previousNumDaysClass="numDays10",lineNumbers.addEventListener("click",toggleSampleTableLineNumbers),leftCheck.addEventListener("click",toggleSampleTableLeftChecks),showEndemics.addEventListener("click",toggleSampleTableShowEndemics),sciNames.addEventListener("click",toggleSampleTableSciNames),italics.addEventListener("click",toggleSampleTableItalics),checklistAuthorsPanel=document.getElementById("checklistAuthorsPanel"),[].forEach.call(document.getElementsByClassName("country-menu")[0].getElementsByTagName("a"),function(e){e.addEventListener("click",choseCountry)}),leftCheck.checked=!0,countryModal=document.getElementById("countryModal"),window.innerWidth<870&&window.addEventListener("scroll",checkWindowScroll)});var map,countries={Argentina:0,Aruba:1,Bolivia:2,Brazil:3,Chile:4,Colombia:5,"CuraÃ§ao":6,Ecuador:7,FrenchGuiana:8,Guyana:9,Paraguay:10,Peru:11,Suriname:12,Trinidad:13,Uruguay:14,Venezuela:15,Bonaire:16,Falklands:17},endemicColor="#C23BC3",extinctColor="#f33",residentColor="#00838f",nonBreederColor="#B66405",vagrantColor="gold",hypotheticalColor="#005903",introducedColor="#222",baseColor="â#444",baseStrokeColor="#bbb",lastQuery,lastSpecies,species,families,numFamilies,birds,numSpeciesList={Argentina:1002,Aruba:219,Bolivia:1382,Brazil:1800,Chile:496,Colombia:1849,"CuraÃ§ao":218,Ecuador:1627,"French Guiana":697,Guyana:783,Paraguay:694,Peru:1800,Suriname:730,Trinidad:468,Uruguay:443,Venezuela:1381,Bonaire:209,Falklands:227,Malvinas:227,"South America":3380},numFamiliesList={Argentina:87,Aruba:52,Bolivia:78,Brazil:91,Chile:66,Colombia:90,"CuraÃ§ao":50,Ecuador:91,"French Guiana":82,Guyana:78,Paraguay:72,Peru:88,Suriname:80,Trinidad:70,Uruguay:72,Venezuela:87,Bonaire:47,Falklands:48,Malvinas:48,"South America":102},currentTaxonomyCountry,currentTaxonomyCountryElement,taxTreeArticleOpen=!1,taxPage,searchSpecials,resultsPanel,searchResults,simpleBarResults,simpleBarTaxPage,closeResultsPanelButton,resultsPanelOpen=!1,searchInput,lastResultsSpecies,lastIndex,searchSlideUpWrapper,taxInstructionsButton,searchInstructionsOpen=!0,selectedFillColor="#fff";document.addEventListener("DOMContentLoaded",function(){(searchSlideUpWrapper=document.querySelector("#taxonomyArticle > div.slideUpWrapper")).style.height=searchSlideUpWrapper.clientHeight+"px",taxInstructionsButton=document.querySelector(".taxInstructionsButton"),(closeResultsPanelButton=document.getElementById("closeResultsPanelButton")).addEventListener("click",toggleSearchResultsPanel),searchInput=document.getElementById("searchInput"),searchSpecials=document.getElementById("searchSpecials"),searchInput.addEventListener("input",getQuery),searchInput.addEventListener("change",getQuery),searchInput.addEventListener("click",getQuery),searchInput.addEventListener("textInput",getQuery),searchInput.addEventListener("focusin",getQuery),searchInput.addEventListener("input",clearSearchInput),searchInput.addEventListener("change",clearSearchInput),searchInput.addEventListener("click",clearSearchInput),searchInput.addEventListener("textInput",clearSearchInput),searchInput.addEventListener("keyup",clearSearchInput),searchInput.addEventListener("focusin",clearSearchInput),searchSpecials.addEventListener("click",getSearchSpecialsQuery),taxInstructionsButton.addEventListener("click",showSearchInstructions),taxPage=document.getElementById("taxPage"),searchResults=document.getElementById("searchResults"),resultsPanel=document.querySelector(".results-panel"),searchResults.addEventListener("click",gotoMatch),taxPage.addEventListener("click",toggleFamilyOpen),getAjax("../data/occurrences.txt",function(e){loadIntoArray(e)})});var deleteMapButton,saveMapButton,mapsCollection,deleteAllMapsButton,currentID=0;document.addEventListener("DOMContentLoaded",function(){(saveMapButton=document.querySelector(".saveMapButton")).addEventListener("click",saveCurrentMap),mapsCollection=document.getElementById("mapsCollection")});