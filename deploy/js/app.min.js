function onResizeWindow(){window.innerWidth<870?window.addEventListener("scroll",checkWindowScroll):window.removeEventListener("scroll",checkWindowScroll);var e=document.querySelector("#mapsCollection");e.children.length>0&&(window.innerWidth>1680?e.style.height="26.92rem":window.innerWidth>=1600?e.style.height="23.1rem":window.innerWidth>=1165?e.style.height="20.8rem":e.style.height="18.1rem")}function checkWindowScroll(){var e=document.documentElement,t=window;e.scrollHeight-t.innerHeight<=t.pageYOffset?document.getElementById("currentMap").style.opacity=0:document.getElementById("currentMap").style.opacity=1}function toggleCountryModal(e){countryModal.classList.toggle("menu-show"),document.getElementsByClassName("md-overlay")[0].classList.toggle("show"),e&&e.stopPropagation()}function toggleSampleTableShowEndemics(){sampleTable.querySelector("td.endemical").classList.toggle("showEndemics")}function toggleSampleTableSciNames(){sampleTable.classList.toggle("noScientificNames"),italics.disabled=!italics.disabled}function toggleSampleTableItalics(){sampleTable.classList.toggle("noItalics")}function toggleSampleTableLeftChecks(){var e=sampleTable.querySelectorAll(".leftCheckBox, .familyHidden");Array.prototype.forEach.call(e,function(e){e.classList.toggle("show")})}function toggleSampleTableLineNumbers(){sampleTable.querySelector("td.lineNumbers").classList.toggle("showLineNumbers")}function setCountry(e){var t=e.target.parentNode.parentNode.querySelector(".highlight");t&&t.classList.remove("highlight"),e.target.classList.add("highlight"),currentCountry||map.getElementsByClassName("drawing")[0].classList.add("active"),toggleCountryModal(),currentCountry=e.target.innerText,countryButton.innerHTML="Falklands"===currentCountry?"Malvinas/Falklands":currentCountry,setChecklistCountryAuthors(currentCountry),loadCountryTaxonomy(currentCountry)}function setChecklistCountryAuthors(e){checklistFlyoutText.innerHTML="Make a checklist for "+e,countryButton.classList.add("highlight"),pdfButton.classList.add("highlight"),csvButton.classList.add("highlight"),currentMap.querySelector(".saveMapButton").style.display="none",currentMap.querySelector(".colorKey").style.opacity="0","French Guiana"===e?selectedCountryFill("FrenchGuiana"):"South America"!==e?selectedCountryFill(e):fillSAMmap(""),"Curaçao"===e?getAjax("Authors/Curacao.txt",setChecklistAuthors):"French Guiana"===e?getAjax("Authors/FrenchGuiana.txt",setChecklistAuthors):"South America"===e?getAjax("Authors/SouthAmerica.txt",setChecklistAuthors):getAjax("Authors/"+e+".txt",setChecklistAuthors)}function setChecklistAuthors(e){var t;t="SouthAmerica"===currentCountry?e.replace(/^.*Version(.*)$/g,"Remsen, et al. $1"):"Colombia"===currentCountry?e.replace(/^(.*)\s+\(.*\).*Version(.*)$/g,"$1. $2"):e.replace(/^(.*\.) \d\d\d\d\..*Version(.*$)/g,"$1 $2"),checklistAuthorsPanel.innerHTML=t,checklistAuthorsPanel.classList.add("show")}function setNumDays(e){var t,n=e.target;if(!n.classList.contains("highlight")&&((gNumDays||0===gNumDays)&&numDaysButton.children[gNumDays+1].classList.remove("highlight"),n.classList.add("highlight"),gNumDays=parseInt(n.innerHTML),sampleTable.classList.remove(previousNumDaysClass),sampleTable.classList.add("numDays"+String(gNumDays)),previousNumDaysClass="numDays"+String(gNumDays),t=sampleTable.querySelectorAll("td.cds, th.cds"),Array.prototype.forEach.call(t,function(e){e.classList.remove("cds")}),6===gNumDays?(t=sampleTable.querySelectorAll("td:nth-child(6), th:nth-child(4)"),Array.prototype.forEach.call(t,function(e){e.classList.add("cds")})):7===gNumDays||8===gNumDays?(t=sampleTable.querySelectorAll("td:nth-child(7), th:nth-child(5)"),Array.prototype.forEach.call(t,function(e){e.classList.add("cds")})):9===gNumDays||10===gNumDays?(t=sampleTable.querySelectorAll("td:nth-child(8), th:nth-child(6)"),Array.prototype.forEach.call(t,function(e){e.classList.add("cds")})):11!==gNumDays&&12!==gNumDays||(t=sampleTable.querySelectorAll("td:nth-child(8), td:nth-child(13), th:nth-child(6), th:nth-child(11)"),Array.prototype.forEach.call(t,function(e){e.classList.add("cds")})),0!==gNumDays)){var r=sampleTable.querySelector("th.flashDays");r&&r.classList.remove("flashDays"),sampleTable.querySelector("th:nth-child("+(gNumDays+1)+")").classList.add("flashDays")}}function getCSVText(){if(currentCountry){requested="csv",logVisit();var e;if(e="French Guiana"===currentCountry?"FrenchGuiana":"South America"===currentCountry?"SouthAmerica":"Curaçao"===currentCountry?"Curacao":currentCountry){var t=document.createElement("form");t.setAttribute("method","post"),t.setAttribute("action","../php/sendCSV.php?country="+e),document.body.appendChild(t),t.submit(),t.remove()}}}function openChecklistPage(){if(currentCountry){requested="checklist",logVisit();var e,t;t="French Guiana"===currentCountry?"FrenchGuiana":"South America"===currentCountry?"SouthAmerica":"Curaçao"===currentCountry?"Curacao":currentCountry,void 0===gNumDays&&(gNumDays=12),void 0===gStartDate&&(gStartDate=1),e="?country="+t,e+="&num_days="+gNumDays,e+="&start_date="+gStartDate,e+="&line_nos="+lineNumbers.checked,e+="&left_check="+leftCheck.checked,e+="&endemics="+showEndemics.checked,e+="&sci_names="+!sciNames.checked,e+="&italics="+!italics.checked,window.open("../php/makePDF.php"+e,"_blank")}}function logVisit(){if(!navigator.sendBeacon)return!0;var e=new FormData;e.append("country",currentCountry),e.append("document",requested),navigator.sendBeacon("./php/collectVisits.php",e)}function initCurrentMap(){prepareSVGstyles("SAMsvg"),(map=document.getElementById("currentMap")).style.opacity="1"}function prepareSVGstyles(e){var t=document.getElementById(e).contentDocument;for(var n in countries){var r=t.getElementById(n);r&&setSVGstyles(r)}}function setSVGstyles(e){if("path"===e.nodeName||"circle"===e.nodeName)e.style.transition="fill 1s";else if("g"===e.parentNode.nodeName)for(var t=e.querySelectorAll("path"),n=t.length,r=0;r<n;r++)t[r].style.transition="fill 1s"}function fillSAMmap(e){var t,n=(t=currentMap.querySelector("#SAMsvg")).contentDocument;for(var r in countries){var i=n.getElementById(r);i&&i!==e&&(newFillColor(i,baseColor),newStrokeColor(i,baseStrokeColor))}addBirdNameToMap("")}function newFillColor(e,t){if("path"===e.nodeName||"circle"===e.nodeName)e.style.fill=t===baseColor?"#535b5f":t,t!==vagrantColor&&(e.style.stroke=baseStrokeColor);else if("g"===e.parentNode.nodeName)for(var n=e.querySelectorAll("path"),r=n.length,i=0;i<r;i++)n[i].style.fill=t===baseColor?"#535b5f":t,t!==vagrantColor&&(n[i].style.stroke=baseStrokeColor)}function selectedCountryFill(e){var t=currentMap.querySelector("#SAMsvg").contentDocument.getElementById(e);fillSAMmap(t),newFillColor(t,selectedCountryFillColor),newStrokeColor(t,baseStrokeColor)}function newStrokeColor(e,t){if("path"===e.nodeName||"circle"===e.nodeName)e.style.stroke=t;else if("g"===e.parentNode.nodeName)for(var n=e.querySelectorAll("path"),r=n.length,i=0;i<r;i++)"Falklands"===e.id?n[i].style.stroke="#fff":n[i].style.stroke=t}function highlightSAMmap(e,t){var n,r=(n="currentMap"===t?currentMap.querySelector("#SAMsvg"):document.getElementById(t)).contentDocument,i=birds[e].split("-");for(var s in countries){var o=r.getElementById(s);if(o){switch("Falklands"===s&&(i[countries[s]]=i[countries[s]].trim()),i[countries[s]]){case"X(e)":newFillColor(o,endemicColor);break;case"X":newFillColor(o,residentColor);break;case"NB":newFillColor(o,nonBreederColor);break;case"V":newFillColor(o,vagrantColor),newStrokeColor(o,"#535b5f");break;case"H":newFillColor(o,hypotheticalColor);break;case"IN":newFillColor(o,introducedColor);break;case"EX":case"EX(e)":newFillColor(o,extinctColor);break;default:newFillColor(o,baseColor)}"currentMap"!==t&&newStrokeColor(o,"#fff")}}"currentMap"===t&&mapsCollection.children.length<5&&(saveMapButton.style.display="block")}function getAjax(e,t){var n=new XMLHttpRequest;return n.open("GET",e),n.onreadystatechange=function(){n.readyState>3&&200===n.status&&t(n.responseText)},n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(),n}function loadOccurrences(e){birds=e.split("\n")}function showSearchInstructions(){document.querySelector(".taxInstructionsButton .tooltip").innerHTML=searchInstructionsOpen?"Open":"Close",taxInstructionsButton.classList.contains("instructionsClosed")||taxInstructionsButton.classList.add("instructionsClosed"),searchSlideUpWrapper.classList.toggle("closeInstructions"),searchInstructionsOpen=!searchInstructionsOpen}function loadCountryTaxonomy(e){searchSpecials.classList.contains("grayed")&&(document.querySelector("#searchForm span.grayed").classList.remove("grayed"),searchSpecials.classList.remove("grayed")),lastQuery&&(document.getElementById("countrySearch").classList.remove("closed"),document.getElementById("searchTerm").innerHTML=e+" : '"+lastQuery+"'"),"South America"!==e&&(searchResults.classList.remove("samTax"),taxPage.classList.remove("samTax")),"French Guiana"===e?getAjax("Countries/FrenchGuianaSACC.html",getCountryData):"Curaçao"===e?getAjax("Countries/CuracaoSACC.html",getCountryData):"South America"===e?(getAjax("Countries/SouthAmericaSACC.html",getCountryData),searchResults.classList.add("samTax"),searchSpecials.querySelector("span:nth-of-type(3)").classList.add("notAvailable"),searchSpecials.querySelector("span:nth-of-type(5)").classList.add("notAvailable"),searchSpecials.classList.add("SAM"),taxPage.classList.add("samTax")):e&&getAjax("Countries/"+e+"SACC.html",getCountryData),"South America"!==e&&(searchSpecials.querySelector("span:nth-of-type(3)").classList.remove("notAvailable"),searchSpecials.querySelector("span:nth-of-type(5)").classList.remove("notAvailable"),searchSpecials.classList.remove("SAM")),lastQuery?"endemic"!==lastQuery&&"hypothetical"!==lastQuery&&"vagrant"!==lastQuery&&"incertae"!==lastQuery&&"extinct"!==lastQuery||(currentMap.querySelector(".saveMapButton").style.display="none"):currentMap.querySelector(".saveMapButton").style.display="none",searchCountryText.innerHTML="Falklands"===e?"the Falklands":e,document.querySelector("#treeIntroText").innerHTML="Falklands"===e?"Falklands/Malvinas &nbsp; : &nbsp; "+numFamiliesList[e]+" families, "+numSpeciesList[e]+" species":e+" &nbsp; : &nbsp; "+numFamiliesList[e]+" families, "+numSpeciesList[e]+" species",document.querySelector(".colorKey").style.opacity="0.9"}function toggleSearchResultsPanel(){searchResults.classList.toggle("fadeIn"),resultsPanel.classList.toggle("translateDown"),resultsPanelOpen=!resultsPanelOpen}function closeOpenFamilies(){}function getCountryData(e){taxPage.innerHTML=e;var t=document.querySelector(".tax-panel");taxTreeArticleOpen?taxTreeArticleOpen=!0:t.classList.add("translateDown"),species=document.getElementById("tree").getElementsByTagName("li"),families=taxPage.querySelectorAll("#tree .family"),numFamilies=families.length,lastQuery&&searchTree(lastQuery),resetTaxPageHeight()}function getQuery(){var e=searchInput.value.search(/[^a-zñã'\s-]/i);if(-1!==e)return searchResults.innerHTML="<li></li><li> &nbsp; &nbsp; character '"+searchInput.value[e]+"' not allowed </li><li></li>",resultsPanelOpen||toggleSearchResultsPanel(),void resetSearchResultsHeight();searchInput.value.length<2||searchTree(searchInput.value)}function getSearchSpecialsQuery(e){searchInput.value="",searchTree("searchSpecialWrapper"===e.target.className?e.target.textContent.trim():e.target.parentNode.textContent.trim())}function escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function searchTree(e){var t;e=escapeRegExp(e),document.querySelector(".colorKey").style.opacity="0.9";var n=0;if(resultsPanelOpen||toggleSearchResultsPanel(),!(lastQuery=e))return searchResults.innerHTML="<li></li><li> &nbsp; &nbsp; search results will appear here</li><li></li>",resultsPanelOpen||toggleSearchResultsPanel(),searchResults.style.top=0,void resetSearchResultsHeight();document.getElementById("countrySearch").classList.remove("closed"),document.getElementById("searchTerm").innerHTML="Falklands"===currentCountry?"Falklands/Malvinas : '"+lastQuery+"'":currentCountry+" : '"+lastQuery+"'";for(var r=0;r<numFamilies;r++)families[r].cloned=!1;var i=!1;lastSpecies&&lastSpecies.classList.contains("active")&&lastSpecies.classList.remove("active");var s,o,a=[],l=0,c=species.length;if("endemic"===e||"hypothetical"===e||"vagrant"===e||"incertae"===e||"extinct"===e){var u;"endemic"===e?u=document.getElementById("tree").getElementsByClassName("endemic"):"extinct"===e?u=document.getElementById("tree").getElementsByClassName("extinct"):"hypothetical"===e?u=document.getElementById("tree").getElementsByClassName("hy"):"vagrant"===e?u=document.getElementById("tree").getElementsByClassName("va"):"incertae"===e&&(u=document.getElementById("tree").getElementsByClassName("ince"));for(var d=0;d<u.length;d++)!0!==u[d].parentNode.parentNode.parentNode.cloned&&(a[l++]=u[d].parentNode.parentNode.parentNode.cloneNode(!0),u[d].parentNode.parentNode.parentNode.cloned=!0),a[l++]=u[d].parentNode.cloneNode(!0)}else{if(e=e.replace(/^\s+|\s+$/g,""),e=e.replace(/n/g,"(n|ñ)"),e=e.replace(/a/g,"(a|ã)"),e=e.replace(/ú/g,"u"),e=e.replace(/á/g,"a"),e=e.replace(/ó/g,"o"),e=e.replace(/í/g,"i"),e=e.replace(/ç/g,"c"),e=e.replace(/\s+/g,"\\s+"),e?t=e:"type here"===(t=searchInput.value.replace(/^\s+|\s+$/g,""))?i=!0:""===t&&(i=!0),i)return searchResults.innerHTML="<li></li><li> &nbsp; &nbsp; no search term entered</li><li></li>",resultsPanelOpen||toggleSearchResultsPanel(),void resetSearchResultsHeight();var h=new RegExp(t,"i");for(r=0;r<c;r++){o=(s=species[r]).className;var p=s.parentNode.parentNode;o?(s.firstChild.firstChild.textContent.match(h)||s.firstChild.lastChild.textContent.match(h))&&(s.cloned=!0,a[l++]=s.cloneNode(!0)):(s.firstChild.textContent.match(h)||s.childNodes[1].textContent.match(h))&&(!0!==p.cloned&&(a[l++]=p.cloneNode(!0),p.cloned=!0),a[l++]=s.cloneNode(!0))}}if(0===a.length)return searchResults.innerHTML="<li></li><li> &nbsp; &nbsp; no matching results found</li><li></li>",resultsPanelOpen||toggleSearchResultsPanel(),void resetSearchResultsHeight();var f,m,y="";for(d=0;d<a.length;d++)if("family"===(m=a[d].className)||"familyOpen"===m){if(y+="<li class='family'><span class='fco'>",y+=a[d].firstChild.firstChild.textContent+"</span><span class='fsc'>",y+=a[d].firstChild.lastChild?a[d].firstChild.childNodes[1].textContent:" ",y+="</span></li>",1===a.length){for(f=0;f<a[0].children[1].children.length;f++)y+="<li data-i='"+a[0].children[1].children[f].getAttribute("data-i")+"' class='bird'>"+a[0].children[1].children[f].innerHTML+"</li>";n=f}}else"fsc"===m||(a[d].style.textShadow="none",y+="<li data-i='"+a[d].getAttribute("data-i")+"' class='bird'>"+a[d].innerHTML+"</li>",n++);searchResults.innerHTML=y,resultsPanelOpen||toggleSearchResultsPanel(),document.getElementById("searchTerm").innerHTML="Falklands"===currentCountry?"Malvinas/Falklands : '"+lastQuery+"'&nbsp;&nbsp;&nbsp;   [ "+n+" species ]":currentCountry+" : '"+lastQuery+"'&nbsp;&nbsp;&nbsp;   [ "+n+" species ]",resetSearchResultsHeight()}function resetSearchResultsHeight(){searchResults.style.height="auto",simpleBarResults=new SimpleBar(document.getElementById("searchResults"),{autoHide:!1});searchResults.scrollHeight>=300?(searchResults.style.height="25rem",simpleBarResults.getScrollElement().style.height="25rem"):(searchResults.style.height=searchResults.scrollHeight+"px",simpleBarResults.getScrollElement().style.height=searchResults.scrollHeight+"px")}function resetTaxPageHeight(){simpleBarTaxPage=new SimpleBar(taxPage,{autoHide:!1});taxPage.style.height="75vh",simpleBarTaxPage.getScrollElement().style.height="75vh",simpleBarTaxPage.recalculate()}function gotoMatch(e){currentMap.querySelector(".colorKey").style.opacity="0.9",lastSpecies&&lastSpecies.classList.contains("active")&&lastSpecies.classList.remove("active");var t=e||window.event,n=t.target,r=n.parentNode,i=n.className;if(-1===n.className.indexOf("simplebar")&&-1===n.className.indexOf("fadeIn")&&"no matching results found"!==n.textContent.replace(/^\s+|\s+$/g,"")&&"no search term entered"!==n.textContent.replace(/^\s+|\s+$/g,"")&&"search results will appear here"!==n.textContent.replace(/^\s+|\s+$/g,"")&&""!==n.textContent.replace(/^\s+|\s+$/g,"")){"family"===i?n=t.target:"fco"===i?(n=r,i="family"):"fsc"===i?(n=r,i="family"):n=null!==i.match(/co/)?r:"bird"===i?t.target:r;for(var s,o=species.length,a=n.textContent,l=0;l<o;l++){var c=(s=species[l]).textContent.split("\n")[0];if(c===a&&"family"!==i){var u=s.parentNode;u.classList.contains("open")||(u.classList.add("open"),u.parentNode.className="familyOpen"),simpleBarTaxPage.getScrollElement().scrollTop=u.parentNode.offsetTop+s.offsetTop-100,s.className="active",lastSpecies=s,highlightSAMmap(lastIndex=Number(s.getAttribute("data-i")),"currentMap"),lastResultsSpecies&&lastResultsSpecies.classList.toggle("active"),n.classList.toggle("active"),lastResultsSpecies=n,addBirdNameToMap(s);break}if(c===a&&"family"===i){simpleBarTaxPage.getScrollElement().scrollTop=s.offsetTop,(lastSpecies=s.firstChild).classList.toggle("active"),lastResultsSpecies&&(lastResultsSpecies.classList.toggle("active"),lastResultsSpecies=null);break}}}}function addBirdNameToMap(e){var t="";e?(t="<span>"+e.firstChild.textContent+"</span><br/><span>"+e.lastChild.textContent+"</span>",document.getElementById("currentBirdName").innerHTML=t):document.getElementById("currentBirdName").innerHTML=t}function toggleFamilyOpen(e){if(-1===e.target.className.indexOf("simplebar")&&"taxPage"!==e.target.id&&numFamilies){document.querySelector(".colorKey").style.opacity="0.9";var t,n=(e=e||window.event).target,r=n.className;if("family"===r||"familyOpen"===r?t=e.target.childNodes[1].nextSibling:"fco"===r?t=e.target.parentNode.nextSibling.nextSibling:"fsc"===r?t=e.target.parentNode.nextSibling.nextSibling:"fTitle"!==r&&"fTitle active"!==r||(t=e.target.nextSibling.nextSibling),t&&!t.classList.contains("open")){t.classList.add("open"),t.parentNode.className="familyOpen";var i=taxPage.getBoundingClientRect().height;t.offsetTop-taxPage.scrollTop>i-24&&(t.parentNode.clientHeight>i?taxPage.scrollTop=t.parentNode.offsetTop:taxPage.scrollTop+=t.lastElementChild.offsetTop+t.lastElementChild.clientHeight);var s=t.parentNode.firstChild.children[1].textContent;s||(s=t.parentNode.firstChild.children[0].textContent),document.querySelector("#treeIntroText").innerHTML=currentCountry+"  &nbsp; : &nbsp; "+s+" has "+t.children.length+" species"}else if(t){t.classList.remove("open"),t.parentNode.className="family";var o=t.parentNode.querySelectorAll(".active");o.length&&o[0].classList.remove("active"),document.querySelector("#treeIntroText").innerHTML=currentCountry+"   &nbsp; : &nbsp; "+numFamiliesList[currentCountry]+" families, "+numSpeciesList[currentCountry]+" species"}t||(n.parentNode.classList.contains("birds")&&(n=n.firstChild),n.parentNode.className="active",n.parentNode!==lastSpecies&&lastSpecies&&lastSpecies.classList.contains("active")&&lastSpecies.classList.remove("active"),lastSpecies=n.parentNode,lastResultsSpecies&&lastResultsSpecies.classList.toggle("active"),lastResultsSpecies=null,addBirdNameToMap(n.parentNode),highlightSAMmap(lastIndex=Number(n.parentNode.getAttribute("data-i")),"currentMap"),document.querySelector("#treeIntroText").innerHTML=currentCountry+"   &nbsp; : &nbsp; "+numFamiliesList[currentCountry]+" families, "+numSpeciesList[currentCountry]+" species *"),taxPage.style.zIndex=5}}function closeAllFamilies(){for(var e=taxPage.querySelectorAll("#tree .familyOpen ul"),t=e.length,n=0;n<t;n++)e[n].classList.remove("open"),e[n].classList.add("closed"),e[n].parentNode.className="family";document.querySelector("#treeIntroText").innerHTML=currentCountry+"   &nbsp; : "+numFamiliesList[currentCountry]+" families, "+numSpeciesList[currentCountry]+" species *"}function revealMapsCollection(){mapsCollection.classList.toggle("open"),map.classList.toggle("shiftUp")}function deleteMap(e){e.stopPropagation(),this.parentNode.parentNode.removeChild(this.parentNode),map.querySelector(".saveMapButton").style.display="block";var t=mapsCollection.getElementsByClassName("smallBird").length;0===t?(mapsCollection.classList.remove("namesOnlySeen"),mapsCollection.removeEventListener("click",revealMapsCollection),deleteAllMapsButton.removeEventListener("click",deleteAllMaps),mapsCollection.classList.remove("open"),map.classList.remove("shiftUp")):repositionChildMaps(t)}function saveCurrentMap(){var e=mapsCollection.getElementsByClassName("smallBird").length;if(5!==e){var t=map.children[0].cloneNode(!0);t.classList.remove("birdMapInstance"),t.classList.add("smallBird"),t.querySelector(".birdName").classList.add("smallBirdText"),t.querySelector(".colorKey").style.display="none",t.querySelector(".birdName").removeAttribute("id"),t.querySelector(".smallBirdText").classList.remove("birdName"),t.querySelector(".drawing").removeAttribute("id"),t.querySelector(".drawing").firstElementChild.setAttribute("id","thin"+currentID),t.removeAttribute("id"),mapsCollection.appendChild(t),1===(e=mapsCollection.getElementsByClassName("smallBird").length)?(mapsCollection.addEventListener("click",revealMapsCollection),mapsCollection.classList.add("namesOnlySeen"),deleteAllMapsButton.addEventListener("click",deleteAllMaps)):5===e&&(map.querySelector(".saveMapButton").style.display="none"),repositionChildMaps(e),(deleteMapButton=t.querySelector(".deleteMapButton")).addEventListener("click",deleteMap),deleteMapButton.addEventListener("mouseenter",function(){this.classList.add("hover")}),deleteMapButton.addEventListener("mouseleave",function(){this.classList.remove("hover")}),document.getElementById("thin"+currentID).onload=function(){highlightSAMmap(lastIndex,"thin"+currentID),mapsCollection.lastChild.style.opacity="1",currentID++}}}function repositionChildMaps(e){var t=mapsCollection.getElementsByClassName("smallBird");switch(e){case 1:t[0].style.left="45vw";break;case 2:t[0].style.left="34vw",t[1].style.left="41vw";break;case 3:t[0].style.left="26vw",t[1].style.left="30.25vw",t[2].style.left="34.5vw";break;case 4:t[0].style.left="21vw",t[1].style.left="24vw",t[2].style.left="27vw",t[3].style.left="30vw";break;case 5:t[0].style.left="17vw",t[1].style.left="20vw",t[2].style.left="23vw",t[3].style.left="26vw",t[4].style.left="29vw"}}function deleteAllMaps(e){e.stopPropagation();for(var t=mapsCollection.getElementsByClassName("smallBird").length,n=1;n<=t;n++)mapsCollection.removeChild(mapsCollection.childNodes[3]);mapsCollection.classList.remove("namesOnlySeen"),mapsCollection.removeEventListener("click",revealMapsCollection),deleteAllMapsButton.removeEventListener("click",deleteAllMaps),mapsCollection.classList.remove("open"),map.classList.remove("shiftUp"),map.querySelector(".saveMapButton").style.display="block"}!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.SimpleBar=t()}(this,function(){"use strict";function e(e,t){return t={exports:{}},e(t,t.exports),t.exports}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function i(e,t,n){function r(t){var n=h,r=p;return h=p=void 0,v=t,m=e.apply(r,n)}function i(e){return v=e,y=setTimeout(c,t),b?r(e):m}function o(e){var n=e-v,r=t-(e-g);return S?Bt(r,f-n):r}function a(e){var n=e-g,r=e-v;return void 0===g||n>=t||n<0||S&&r>=f}function c(){var e=Nt();if(a(e))return u(e);y=setTimeout(c,o(e))}function u(e){return y=void 0,C&&h?r(e):(h=p=void 0,m)}function d(){var e=Nt(),n=a(e);if(h=arguments,p=this,g=e,n){if(void 0===y)return i(g);if(S)return y=setTimeout(c,t),r(g)}return void 0===y&&(y=setTimeout(c,t)),m}var h,p,f,m,y,g,v=0,b=!1,S=!1,C=!0;if("function"!=typeof e)throw new TypeError(yt);return t=l(t)||0,s(n)&&(b=!!n.leading,f=(S="maxWait"in n)?At(l(n.maxWait)||0,t):f,C="trailing"in n?!!n.trailing:C),d.cancel=function(){void 0!==y&&clearTimeout(y),v=0,h=g=p=y=void 0},d.flush=function(){return void 0===y?m:u(Nt())},d}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function o(e){return!!e&&"object"==typeof e}function a(e){return"symbol"==typeof e||o(e)&&Mt.call(e)==vt}function l(e){if("number"==typeof e)return e;if(a(e))return gt;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(bt,"");var n=Ct.test(e);return n||Et.test(e)?Lt(e.slice(2),n?2:8):St.test(e)?gt:+e}function c(e){return parseFloat(e)||0}function u(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return t.reduce(function(t,n){return t+c(e["border-"+n+"-width"])},0)}function d(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n+=1){var i=r[n],s=e["padding-"+i];t[i]=c(s)}return t}function h(e){var t=e.getBBox();return g(0,0,t.width,t.height)}function p(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return Wt;var r=jt(e).getComputedStyle(e),i=d(r),s=i.left+i.right,o=i.top+i.bottom,a=c(r.width),l=c(r.height);if("border-box"===r.boxSizing&&(Math.round(a+s)!==t&&(a-=u(r,"left","right")+s),Math.round(l+o)!==n&&(l-=u(r,"top","bottom")+o)),!f(e)){var h=Math.round(a+s)-t,p=Math.round(l+o)-n;1!==Math.abs(h)&&(a-=h),1!==Math.abs(p)&&(l-=p)}return g(i.left,i.top,a,l)}function f(e){return e===jt(e).document.documentElement}function m(e){return _t?Xt(e)?h(e):p(e):Wt}function y(e){var t=e.x,n=e.y,r=e.width,i=e.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,o=Object.create(s.prototype);return Ht(o,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),o}function g(e,t,n,r){return{x:e,y:t,width:n,height:r}}var v=function(e){return"object"==typeof e?null!==e:"function"==typeof e},b=function(e){if(!v(e))throw TypeError(e+" is not an object!");return e},S=function(e){try{return!!e()}catch(e){return!0}},C=!S(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),E="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},L=e(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),w=L.document,k=v(w)&&v(w.createElement),x=function(e){return k?w.createElement(e):{}},M=!C&&!S(function(){return 7!=Object.defineProperty(x("div"),"a",{get:function(){return 7}}).a}),A=function(e,t){if(!v(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!v(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!v(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!v(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},B=Object.defineProperty,N={f:C?Object.defineProperty:function(e,t,n){if(b(e),t=A(t,!0),b(n),M)try{return B(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},T=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},O=C?function(e,t,n){return N.f(e,t,T(1,n))}:function(e,t,n){return e[t]=n,e},_={}.hasOwnProperty,I=function(e,t){return _.call(e,t)},D=0,R=Math.random(),F=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++D+R).toString(36))},P=e(function(e){var t=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=t)}),q=(P.version,e(function(e){var t=F("src"),n=Function.toString,r=(""+n).split("toString");P.inspectSource=function(e){return n.call(e)},(e.exports=function(e,n,i,s){var o="function"==typeof i;o&&(I(i,"name")||O(i,"name",n)),e[n]!==i&&(o&&(I(i,t)||O(i,t,e[n]?""+e[n]:r.join(String(n)))),e===L?e[n]=i:s?e[n]?e[n]=i:O(e,n,i):(delete e[n],O(e,n,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[t]||n.call(this)})})),z=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e},H=e(function(e){var t=L["__core-js_shared__"]||(L["__core-js_shared__"]={});(e.exports=function(e,n){return t[e]||(t[e]=void 0!==n?n:{})})("versions",[]).push({version:P.version,mode:"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})}),j=e(function(e){var t=H("wks"),n=L.Symbol,r="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=r&&n[e]||(r?n:F)("Symbol."+e))}).store=t}),W=function(e,t,n){var r=j(e),i=n(z,r,""[e]),s=i[0],o=i[1];S(function(){var t={};return t[r]=function(){return 7},7!=""[e](t)})&&(q(String.prototype,e,s),O(RegExp.prototype,r,2==t?function(e,t){return o.call(e,this,t)}:function(e){return o.call(e,this)}))};W("replace",2,function(e,t,n){return[function(r,i){var s=e(this),o=void 0==r?void 0:r[t];return void 0!==o?o.call(r,s,i):n.call(String(s),r,i)},n]});var X=N.f,Y=Function.prototype,V=/^\s*function ([^ (]*)/;"name"in Y||C&&X(Y,"name",{configurable:!0,get:function(){try{return(""+this).match(V)[1]}catch(e){return""}}}),W("match",1,function(e,t,n){return[function(n){var r=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},n]});var G=j("unscopables"),Q=Array.prototype;void 0==Q[G]&&O(Q,G,{});var $=function(e){Q[G][e]=!0},U=function(e,t){return{value:t,done:!!e}},K={},J={}.toString,Z=function(e){return J.call(e).slice(8,-1)},ee=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==Z(e)?e.split(""):Object(e)},te=function(e){return ee(z(e))},ne=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},re=function(e,t,n){if(ne(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}},ie=function(e,t,n){var r,i,s,o,a=e&ie.F,l=e&ie.G,c=e&ie.S,u=e&ie.P,d=e&ie.B,h=l?L:c?L[t]||(L[t]={}):(L[t]||{}).prototype,p=l?P:P[t]||(P[t]={}),f=p.prototype||(p.prototype={});l&&(n=t);for(r in n)s=((i=!a&&h&&void 0!==h[r])?h:n)[r],o=d&&i?re(s,L):u&&"function"==typeof s?re(Function.call,s):s,h&&q(h,r,s,e&ie.U),p[r]!=s&&O(p,r,o),u&&f[r]!=s&&(f[r]=s)};L.core=P,ie.F=1,ie.G=2,ie.S=4,ie.P=8,ie.B=16,ie.W=32,ie.U=64,ie.R=128;var se=ie,oe=Math.ceil,ae=Math.floor,le=function(e){return isNaN(e=+e)?0:(e>0?ae:oe)(e)},ce=Math.min,ue=function(e){return e>0?ce(le(e),9007199254740991):0},de=Math.max,he=Math.min,pe=function(e,t){return e=le(e),e<0?de(e+t,0):he(e,t)},fe=H("keys"),me=function(e){return fe[e]||(fe[e]=F(e))},ye=function(e){return function(t,n,r){var i,s=te(t),o=ue(s.length),a=pe(r,o);if(e&&n!=n){for(;o>a;)if((i=s[a++])!=i)return!0}else for(;o>a;a++)if((e||a in s)&&s[a]===n)return e||a||0;return!e&&-1}}(!1),ge=me("IE_PROTO"),ve=function(e,t){var n,r=te(e),i=0,s=[];for(n in r)n!=ge&&I(r,n)&&s.push(n);for(;t.length>i;)I(r,n=t[i++])&&(~ye(s,n)||s.push(n));return s},be="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Se=Object.keys||function(e){return ve(e,be)},Ce=C?Object.defineProperties:function(e,t){b(e);for(var n,r=Se(t),i=r.length,s=0;i>s;)N.f(e,n=r[s++],t[n]);return e},Ee=L.document,Le=Ee&&Ee.documentElement,we=me("IE_PROTO"),ke=function(){},xe=function(){var e,t=x("iframe"),n=be.length;for(t.style.display="none",Le.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),xe=e.F;n--;)delete xe.prototype[be[n]];return xe()},Me=Object.create||function(e,t){var n;return null!==e?(ke.prototype=b(e),n=new ke,ke.prototype=null,n[we]=e):n=xe(),void 0===t?n:Ce(n,t)},Ae=N.f,Be=j("toStringTag"),Ne=function(e,t,n){e&&!I(e=n?e:e.prototype,Be)&&Ae(e,Be,{configurable:!0,value:t})},Te={};O(Te,j("iterator"),function(){return this});var Oe=function(e,t,n){e.prototype=Me(Te,{next:T(1,n)}),Ne(e,t+" Iterator")},_e=function(e){return Object(z(e))},Ie=me("IE_PROTO"),De=Object.prototype,Re=Object.getPrototypeOf||function(e){return e=_e(e),I(e,Ie)?e[Ie]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?De:null},Fe=j("iterator"),Pe=!([].keys&&"next"in[].keys()),qe=function(){return this},ze=function(e,t,n,r,i,s,o){Oe(n,t,r);var a,l,c,u=function(e){if(!Pe&&e in f)return f[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},d=t+" Iterator",h="values"==i,p=!1,f=e.prototype,m=f[Fe]||f["@@iterator"]||i&&f[i],y=m||u(i),g=i?h?u("entries"):y:void 0,v="Array"==t?f.entries||m:m;if(v&&(c=Re(v.call(new e)))!==Object.prototype&&c.next&&(Ne(c,d,!0),"function"!=typeof c[Fe]&&O(c,Fe,qe)),h&&m&&"values"!==m.name&&(p=!0,y=function(){return m.call(this)}),(Pe||p||!f[Fe])&&O(f,Fe,y),K[t]=y,K[d]=qe,i)if(a={values:h?y:u("values"),keys:s?y:u("keys"),entries:g},o)for(l in a)l in f||q(f,l,a[l]);else se(se.P+se.F*(Pe||p),t,a);return a}(Array,"Array",function(e,t){this._t=te(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,U(1)):"keys"==t?U(0,n):"values"==t?U(0,e[n]):U(0,[n,e[n]])},"values");K.Arguments=K.Array,$("keys"),$("values"),$("entries");for(var He=j("iterator"),je=j("toStringTag"),We=K.Array,Xe={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Ye=Se(Xe),Ve=0;Ve<Ye.length;Ve++){var Ge,Qe=Ye[Ve],$e=Xe[Qe],Ue=L[Qe],Ke=Ue&&Ue.prototype;if(Ke&&(Ke[He]||O(Ke,He,We),Ke[je]||O(Ke,je,Qe),K[Qe]=We,$e))for(Ge in ze)Ke[Ge]||q(Ke,Ge,ze[Ge],!0)}var Je=function(e,t,n,r){try{return r?t(b(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&b(i.call(e)),t}},Ze=j("iterator"),et=Array.prototype,tt=function(e){return void 0!==e&&(K.Array===e||et[Ze]===e)},nt=function(e,t,n){t in e?N.f(e,t,T(0,n)):e[t]=n},rt=j("toStringTag"),it="Arguments"==Z(function(){return arguments}()),st=function(e,t){try{return e[t]}catch(e){}},ot=function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=st(t=Object(e),rt))?n:it?Z(t):"Object"==(r=Z(t))&&"function"==typeof t.callee?"Arguments":r},at=j("iterator"),lt=P.getIteratorMethod=function(e){if(void 0!=e)return e[at]||e["@@iterator"]||K[ot(e)]},ct=j("iterator"),ut=!1;try{[7][ct]().return=function(){ut=!0}}catch(e){}se(se.S+se.F*!function(e,t){if(!t&&!ut)return!1;var n=!1;try{var r=[7],i=r[ct]();i.next=function(){return{done:n=!0}},r[ct]=function(){return i},e(r)}catch(e){}return n}(function(e){}),"Array",{from:function(e){var t,n,r,i,s=_e(e),o="function"==typeof this?this:Array,a=arguments.length,l=a>1?arguments[1]:void 0,c=void 0!==l,u=0,d=lt(s);if(c&&(l=re(l,a>2?arguments[2]:void 0,2)),void 0==d||o==Array&&tt(d))for(n=new o(t=ue(s.length));t>u;u++)nt(n,u,c?l(s[u],u):s[u]);else for(i=d.call(s),n=new o;!(r=i.next()).done;u++)nt(n,u,c?Je(i,l,[r.value,u],!0):r.value);return n.length=u,n}});var dt={f:Object.getOwnPropertySymbols},ht={f:{}.propertyIsEnumerable},pt=Object.assign,ft=!pt||S(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=pt({},e)[n]||Object.keys(pt({},t)).join("")!=r})?function(e,t){for(var n=_e(e),r=arguments.length,i=1,s=dt.f,o=ht.f;r>i;)for(var a,l=ee(arguments[i++]),c=s?Se(l).concat(s(l)):Se(l),u=c.length,d=0;u>d;)o.call(l,a=c[d++])&&(n[a]=l[a]);return n}:pt;se(se.S+se.F,"Object",{assign:ft});var mt=e(function(e,t){!function(t,n){e.exports=n()}(0,function(){return function(){if("undefined"==typeof document)return 0;var e,t=document.body,n=document.createElement("div"),r=n.style;return r.position="absolute",r.top=r.left="-9999px",r.width=r.height="100px",r.overflow="scroll",t.appendChild(n),e=n.offsetWidth-n.clientWidth,t.removeChild(n),e}})}),yt="Expected a function",gt=NaN,vt="[object Symbol]",bt=/^\s+|\s+$/g,St=/^[-+]0x[0-9a-f]+$/i,Ct=/^0b[01]+$/i,Et=/^0o[0-7]+$/i,Lt=parseInt,wt="object"==typeof E&&E&&E.Object===Object&&E,kt="object"==typeof self&&self&&self.Object===Object&&self,xt=wt||kt||Function("return this")(),Mt=Object.prototype.toString,At=Math.max,Bt=Math.min,Nt=function(){return xt.Date.now()},Tt=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError(yt);return s(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),i(e,t,{leading:r,maxWait:t,trailing:o})},Ot=function(){function e(e,t){var n=-1;return e.some(function(e,r){return e[0]===t&&(n=r,!0)}),n}return"undefined"!=typeof Map?Map:function(){function t(){this.__entries__=[]}var n={size:{configurable:!0}};return n.size.get=function(){return this.__entries__.length},t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){var n=this;void 0===t&&(t=null);for(var r=0,i=n.__entries__;r<i.length;r+=1){var s=i[r];e.call(t,s[1],s[0])}},Object.defineProperties(t.prototype,n),t}()}(),_t="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,It="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Dt="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(It):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},Rt=2,Ft=function(e,t){function n(){s&&(s=!1,e()),o&&i()}function r(){Dt(n)}function i(){var e=Date.now();if(s){if(e-a<Rt)return;o=!0}else s=!0,o=!1,setTimeout(r,t);a=e}var s=!1,o=!1,a=0;return i},Pt=["top","right","bottom","left","width","height","size","weight"],qt="undefined"!=typeof MutationObserver,zt=function(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Ft(this.refresh.bind(this),20)};zt.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},zt.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},zt.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},zt.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},zt.prototype.connect_=function(){_t&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),qt?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},zt.prototype.disconnect_=function(){_t&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},zt.prototype.onTransitionEnd_=function(e){var t=e.propertyName;void 0===t&&(t=""),Pt.some(function(e){return!!~t.indexOf(e)})&&this.refresh()},zt.getInstance=function(){return this.instance_||(this.instance_=new zt),this.instance_},zt.instance_=null;var Ht=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n+=1){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},jt=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||It},Wt=g(0,0,0,0),Xt="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof jt(e).SVGGraphicsElement}:function(e){return e instanceof jt(e).SVGElement&&"function"==typeof e.getBBox},Yt=function(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=g(0,0,0,0),this.target=e};Yt.prototype.isActive=function(){var e=m(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},Yt.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e};var Vt=function(e,t){var n=y(t);Ht(this,{target:e,contentRect:n})},Gt=function(e,t,n){if(this.activeObservations_=[],this.observations_=new Ot,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n};Gt.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof jt(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Yt(e)),this.controller_.addObserver(this),this.controller_.refresh())}},Gt.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof jt(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},Gt.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},Gt.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},Gt.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new Vt(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},Gt.prototype.clearActive=function(){this.activeObservations_.splice(0)},Gt.prototype.hasActive=function(){return this.activeObservations_.length>0};var Qt="undefined"!=typeof WeakMap?new WeakMap:new Ot,$t=function(e){if(!(this instanceof $t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=zt.getInstance(),n=new Gt(e,t,this);Qt.set(this,n)};["observe","unobserve","disconnect"].forEach(function(e){$t.prototype[e]=function(){return(t=Qt.get(this))[e].apply(t,arguments);var t}});var Ut=void 0!==It.ResizeObserver?It.ResizeObserver:$t,Kt=!("undefined"==typeof window||!window.document||!window.document.createElement),Jt=function(){function e(n,r){var i=this;t(this,e),this.onScrollX=function(){i.scrollXTicking||(window.requestAnimationFrame(i.scrollX),i.scrollXTicking=!0)},this.onScrollY=function(){i.scrollYTicking||(window.requestAnimationFrame(i.scrollY),i.scrollYTicking=!0)},this.scrollX=function(){i.showScrollbar("x"),i.positionScrollbar("x"),i.scrollXTicking=!1},this.scrollY=function(){i.showScrollbar("y"),i.positionScrollbar("y"),i.scrollYTicking=!1},this.onMouseEnter=function(){i.showScrollbar("x"),i.showScrollbar("y")},this.onMouseMove=function(e){var t=i.trackY.getBoundingClientRect(),n=i.trackX.getBoundingClientRect();i.mouseX=e.clientX,i.mouseY=e.clientY,i.isWithinBounds(t)&&i.showScrollbar("y"),i.isWithinBounds(n)&&i.showScrollbar("x")},this.onWindowResize=function(){i.hideNativeScrollbar()},this.hideScrollbars=function(){var e=i.trackY.getBoundingClientRect(),t=i.trackX.getBoundingClientRect();i.isWithinBounds(e)||(i.scrollbarY.classList.remove("visible"),i.isVisible.y=!1),i.isWithinBounds(t)||(i.scrollbarX.classList.remove("visible"),i.isVisible.x=!1)},this.onMouseDown=function(e){var t=i.scrollbarY.getBoundingClientRect(),n=i.scrollbarX.getBoundingClientRect();i.isWithinBounds(t)&&(e.preventDefault(),i.onDrag(e,"y")),i.isWithinBounds(n)&&(e.preventDefault(),i.onDrag(e,"x"))},this.drag=function(e){var t,n,r;e.preventDefault(),"y"===i.currentAxis?(t=e.pageY,n=i.trackY,r=i.scrollContentEl):(t=e.pageX,n=i.trackX,r=i.contentEl);var s=(t-n.getBoundingClientRect()[i.offsetAttr[i.currentAxis]]-i.dragOffset[i.currentAxis])/n[i.sizeAttr[i.currentAxis]]*i.contentEl[i.scrollSizeAttr[i.currentAxis]];r[i.scrollOffsetAttr[i.currentAxis]]=s},this.onEndDrag=function(){document.removeEventListener("mousemove",i.drag),document.removeEventListener("mouseup",i.onEndDrag)},this.el=n,this.flashTimeout,this.contentEl,this.scrollContentEl,this.dragOffset={x:0,y:0},this.isEnabled={x:!0,y:!0},this.isVisible={x:!1,y:!1},this.scrollOffsetAttr={x:"scrollLeft",y:"scrollTop"},this.sizeAttr={x:"offsetWidth",y:"offsetHeight"},this.scrollSizeAttr={x:"scrollWidth",y:"scrollHeight"},this.offsetAttr={x:"left",y:"top"},this.globalObserver,this.mutationObserver,this.resizeObserver,this.currentAxis,this.scrollbarWidth,this.options=Object.assign({},e.defaultOptions,r),this.isRtl="rtl"===this.options.direction,this.classNames=this.options.classNames,this.offsetSize=20,this.recalculate=Tt(this.recalculate.bind(this),1e3),this.onMouseMove=Tt(this.onMouseMove.bind(this),100),this.init()}return r(e,[{key:"init",value:function(){this.el.SimpleBar=this,this.initDOM(),Kt&&(this.hideNativeScrollbar(),this.render(),this.initListeners())}},{key:"initDOM",value:function(){var e=this;if(Array.from(this.el.children).filter(function(t){return t.classList.contains(e.classNames.scrollContent)}).length)this.trackX=this.el.querySelector(".".concat(this.classNames.track,".horizontal")),this.trackY=this.el.querySelector(".".concat(this.classNames.track,".vertical")),this.scrollContentEl=this.el.querySelector(".".concat(this.classNames.scrollContent)),this.contentEl=this.el.querySelector(".".concat(this.classNames.content));else{for(this.scrollContentEl=document.createElement("div"),this.contentEl=document.createElement("div"),this.scrollContentEl.classList.add(this.classNames.scrollContent),this.contentEl.classList.add(this.classNames.content);this.el.firstChild;)this.contentEl.appendChild(this.el.firstChild);this.scrollContentEl.appendChild(this.contentEl),this.el.appendChild(this.scrollContentEl)}if(!this.trackX||!this.trackY){var t=document.createElement("div"),n=document.createElement("div");t.classList.add(this.classNames.track),n.classList.add(this.classNames.scrollbar),this.options.autoHide||n.classList.add("visible"),t.appendChild(n),this.trackX=t.cloneNode(!0),this.trackX.classList.add("horizontal"),this.trackY=t.cloneNode(!0),this.trackY.classList.add("vertical"),this.el.insertBefore(this.trackX,this.el.firstChild),this.el.insertBefore(this.trackY,this.el.firstChild)}this.scrollbarX=this.trackX.querySelector(".".concat(this.classNames.scrollbar)),this.scrollbarY=this.trackY.querySelector(".".concat(this.classNames.scrollbar)),this.el.setAttribute("data-simplebar","init")}},{key:"initListeners",value:function(){var e=this;this.options.autoHide&&this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("mousedown",this.onMouseDown),this.el.addEventListener("mousemove",this.onMouseMove),this.contentEl.addEventListener("scroll",this.onScrollX),this.scrollContentEl.addEventListener("scroll",this.onScrollY),window.addEventListener("resize",this.onWindowResize),"undefined"!=typeof MutationObserver&&(this.mutationObserver=new MutationObserver(function(t){t.forEach(function(t){(e.isChildNode(t.target)||t.addedNodes.length)&&e.recalculate()})}),this.mutationObserver.observe(this.el,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this.resizeObserver=new Ut(this.recalculate),this.resizeObserver.observe(this.el)}},{key:"recalculate",value:function(){this.render()}},{key:"render",value:function(){this.contentSizeX=this.contentEl[this.scrollSizeAttr.x],this.contentSizeY=this.contentEl[this.scrollSizeAttr.y]-(this.scrollbarWidth||this.offsetSize),this.trackXSize=this.trackX[this.sizeAttr.x],this.trackYSize=this.trackY[this.sizeAttr.y],this.isEnabled.x=this.trackXSize<this.contentSizeX,this.isEnabled.y=this.trackYSize<this.contentSizeY,this.resizeScrollbar("y"),this.positionScrollbar("y"),this.toggleTrackVisibility("y")}},{key:"resizeScrollbar",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";if(this.isEnabled[r]||this.options.forceVisible){"x"===r?(e=this.scrollbarX,t=this.contentSizeX,n=this.trackXSize):(e=this.scrollbarY,t=this.contentSizeY,n=this.trackYSize);var i=n/t;this.handleSize=Math.max(~~(i*n),this.options.scrollbarMinSize),this.options.scrollbarMaxSize&&(this.handleSize=Math.min(this.handleSize,this.options.scrollbarMaxSize)),"x"===r?e.style.width="".concat(this.handleSize,"px"):e.style.height="".concat(this.handleSize,"px")}}},{key:"positionScrollbar",value:function(){var e,t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";"x"===i?(e=this.scrollbarX,t=this.contentEl[this.scrollOffsetAttr[i]],n=this.contentSizeX,r=this.trackXSize):(e=this.scrollbarY,t=this.scrollContentEl[this.scrollOffsetAttr[i]],n=this.contentSizeY,r=this.trackYSize);var s=t/(n-r),o=~~((r-this.handleSize)*s);(this.isEnabled[i]||this.options.forceVisible)&&(e.style.transform="x"===i?"translate3d(".concat(o,"px, 0, 0)"):"translate3d(0, ".concat(o,"px, 0)"))}},{key:"toggleTrackVisibility",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y",t="y"===e?this.trackY:this.trackX,n="y"===e?this.scrollbarY:this.scrollbarX;this.isEnabled[e]||this.options.forceVisible?t.style.visibility="visible":t.style.visibility="hidden",this.options.forceVisible&&(this.isEnabled[e]?n.style.visibility="visible":n.style.visibility="hidden")}},{key:"hideNativeScrollbar",value:function(){this.scrollbarWidth=mt(),this.scrollContentEl.style[this.isRtl?"paddingLeft":"paddingRight"]="".concat(this.scrollbarWidth+1.5||this.offsetSize,"px"),this.scrollContentEl.style.marginBottom="-".concat(2*this.scrollbarWidth||this.offsetSize,"px"),this.contentEl.style.paddingBottom="".concat(this.scrollbarWidth||this.offsetSize,"px"),0!==this.scrollbarWidth&&(this.contentEl.style[this.isRtl?"marginLeft":"marginRight"]="-".concat(this.scrollbarWidth,"px"))}},{key:"showScrollbar",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";this.isVisible[t]||(e="x"===t?this.scrollbarX:this.scrollbarY,this.isEnabled[t]&&(e.classList.add("visible"),this.isVisible[t]=!0),this.options.autoHide&&(window.clearInterval(this.flashTimeout),this.flashTimeout=window.setInterval(this.hideScrollbars,this.options.timeout)))}},{key:"onDrag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";e.preventDefault();var n="y"===t?this.scrollbarY:this.scrollbarX,r="y"===t?e.pageY:e.pageX;this.dragOffset[t]=r-n.getBoundingClientRect()[this.offsetAttr[t]],this.currentAxis=t,document.addEventListener("mousemove",this.drag),document.addEventListener("mouseup",this.onEndDrag)}},{key:"getScrollElement",value:function(){return"y"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y")?this.scrollContentEl:this.contentEl}},{key:"getContentElement",value:function(){return this.contentEl}},{key:"removeListeners",value:function(){this.options.autoHide&&this.el.removeEventListener("mouseenter",this.onMouseEnter),this.scrollContentEl.removeEventListener("scroll",this.onScrollY),this.contentEl.removeEventListener("scroll",this.onScrollX),this.mutationObserver.disconnect(),this.resizeObserver.disconnect()}},{key:"unMount",value:function(){this.removeListeners(),this.el.SimpleBar=null}},{key:"isChildNode",value:function(e){return null!==e&&(e===this.el||this.isChildNode(e.parentNode))}},{key:"isWithinBounds",value:function(e){return this.mouseX>=e.left&&this.mouseX<=e.left+e.width&&this.mouseY>=e.top&&this.mouseY<=e.top+e.height}}],[{key:"initHtmlApi",value:function(){this.initDOMLoadedElements=this.initDOMLoadedElements.bind(this),"undefined"!=typeof MutationObserver&&(this.globalObserver=new MutationObserver(function(t){t.forEach(function(t){Array.from(t.addedNodes).forEach(function(t){1===t.nodeType&&(t.hasAttribute("data-simplebar")?!t.SimpleBar&&new e(t,e.getElOptions(t)):Array.from(t.querySelectorAll("[data-simplebar]")).forEach(function(t){!t.SimpleBar&&new e(t,e.getElOptions(t))}))}),Array.from(t.removedNodes).forEach(function(e){1===e.nodeType&&(e.hasAttribute("data-simplebar")?e.SimpleBar&&e.SimpleBar.unMount():Array.from(e.querySelectorAll("[data-simplebar]")).forEach(function(e){e.SimpleBar&&e.SimpleBar.unMount()}))})})}),this.globalObserver.observe(document,{childList:!0,subtree:!0})),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(this.initDOMLoadedElements):(document.addEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.addEventListener("load",this.initDOMLoadedElements))}},{key:"getElOptions",value:function(e){return Array.from(e.attributes).reduce(function(e,t){var n=t.name.match(/data-simplebar-(.+)/);if(n){var r=n[1].replace(/\W+(.)/g,function(e,t){return t.toUpperCase()});switch(t.value){case"true":e[r]=!0;break;case"false":e[r]=!1;break;case void 0:e[r]=!0;break;default:e[r]=t.value}}return e},{})}},{key:"removeObserver",value:function(){this.globalObserver.disconnect()}},{key:"initDOMLoadedElements",value:function(){document.removeEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.removeEventListener("load",this.initDOMLoadedElements),Array.from(document.querySelectorAll("[data-simplebar]")).forEach(function(t){t.SimpleBar||new e(t,e.getElOptions(t))})}},{key:"defaultOptions",get:function(){return{autoHide:!0,forceVisible:!1,classNames:{content:"simplebar-content",scrollContent:"simplebar-scroll-content",scrollbar:"simplebar-scrollbar",track:"simplebar-track"},scrollbarMinSize:25,scrollbarMaxSize:0,direction:"ltr",timeout:1e3}}}]),e}();return Kt&&Jt.initHtmlApi(),Jt});var sampleTable,leftCheck,sciNames,italics,lineNumbers,showEndemics,currentCountry,checklistAuthorsPanel,checklistFlyoutText,countryModal,gNumDays,gStartDate,previousNumDaysClass,countryButton,numDaysButton,pdfButton,csvButton,requested;document.addEventListener("DOMContentLoaded",function(){window.addEventListener("resize",onResizeWindow),(countryButton=document.getElementById("countryButton")).addEventListener("click",toggleCountryModal),(numDaysButton=document.getElementById("numDays")).addEventListener("click",setNumDays),numDaysButton.children.item(11).classList.add("highlight"),gNumDays=10,(sampleTable=document.getElementById("sampleTable")).classList.add("numDays"+String(gNumDays)),previousNumDaysClass="numDays10",(pdfButton=document.getElementById("pdfButton")).addEventListener("click",openChecklistPage),(csvButton=document.getElementById("csvButton")).addEventListener("click",getCSVText),lineNumbers=document.getElementById("lineNumbers"),leftCheck=document.getElementById("leftCheck"),showEndemics=document.getElementById("showEndemics"),sciNames=document.getElementById("sciNames"),italics=document.getElementById("italics"),lineNumbers.addEventListener("click",toggleSampleTableLineNumbers),leftCheck.addEventListener("click",toggleSampleTableLeftChecks),showEndemics.addEventListener("click",toggleSampleTableShowEndemics),sciNames.addEventListener("click",toggleSampleTableSciNames),italics.addEventListener("click",toggleSampleTableItalics),checklistAuthorsPanel=document.getElementById("checklistAuthorsPanel"),checklistFlyoutText=document.getElementById("checklistFlyoutText"),document.querySelector(".country-menu").addEventListener("click",setCountry),leftCheck.checked=!0,countryModal=document.getElementById("countryModal"),window.innerWidth<870&&window.addEventListener("scroll",checkWindowScroll)});var map,countries={Argentina:0,Aruba:1,Bolivia:2,Brazil:3,Chile:4,Colombia:5,"Curaçao":6,Ecuador:7,FrenchGuiana:8,Guyana:9,Paraguay:10,Peru:11,Suriname:12,Trinidad:13,Uruguay:14,Venezuela:15,Bonaire:16,Falklands:17},endemicColor="#C23BC3",extinctColor="#f33",residentColor="#00838f",nonBreederColor="#994c00",vagrantColor="gold",hypotheticalColor="#005903",introducedColor="#222",baseColor="​#535b5f",baseStrokeColor="#bbb",selectedCountryFillColor="#fff",lastQuery,lastSpecies,species,families,numFamilies,birds,numSpeciesList={Argentina:1005,Aruba:219,Bolivia:1383,Brazil:1804,Chile:498,Colombia:1847,"Curaçao":218,Ecuador:1632,"French Guiana":698,Guyana:783,Paraguay:694,Peru:1803,Suriname:731,Trinidad:470,Uruguay:448,Venezuela:1383,Bonaire:210,Falklands:227,"South America":3398},numFamiliesList={Argentina:87,Aruba:52,Bolivia:78,Brazil:91,Chile:67,Colombia:90,"Curaçao":50,Ecuador:91,"French Guiana":82,Guyana:78,Paraguay:72,Peru:88,Suriname:80,Trinidad:70,Uruguay:72,Venezuela:87,Bonaire:47,Falklands:48,"South America":102},searchCountryText,taxTreeArticleOpen=!1,taxPage,searchSpecials,resultsPanel,searchResults,simpleBarResults,simpleBarTaxPage,closeResultsPanelButton,resultsPanelOpen=!1,closeOpenFamilies,searchInput,lastResultsSpecies,lastIndex,searchSlideUpWrapper,taxInstructionsButton,searchInstructionsOpen=!0;document.addEventListener("DOMContentLoaded",function(){(searchSlideUpWrapper=document.querySelector("#taxonomyArticle > div.slideUpWrapper")).style.height=searchSlideUpWrapper.clientHeight+"px",taxInstructionsButton=document.querySelector(".taxInstructionsButton"),(closeResultsPanelButton=document.getElementById("closeResultsPanelButton")).addEventListener("click",toggleSearchResultsPanel),(closeOpenFamilies=document.getElementById("closeOpenFamiliesButton")).addEventListener("click",closeAllFamilies),searchCountryText=document.getElementById("searchCountryText"),searchInput=document.getElementById("searchInput"),searchSpecials=document.getElementById("searchSpecials"),searchInput.addEventListener("input",getQuery),searchSpecials.addEventListener("click",getSearchSpecialsQuery),taxInstructionsButton.addEventListener("click",showSearchInstructions),taxPage=document.getElementById("taxPage"),searchResults=document.getElementById("searchResults"),resultsPanel=document.querySelector(".results-panel"),searchResults.addEventListener("click",gotoMatch,!1),taxPage.addEventListener("click",toggleFamilyOpen),getAjax("../data/occurrences.txt",function(e){loadOccurrences(e)})});var deleteMapButton,saveMapButton,mapsCollection,deleteAllMapsButton,currentID=0;document.addEventListener("DOMContentLoaded",function(){(saveMapButton=document.querySelector(".saveMapButton")).addEventListener("click",saveCurrentMap),mapsCollection=document.getElementById("mapsCollection"),(deleteAllMapsButton=document.getElementById("deleteAllMapsButton")).addEventListener("click",deleteAllMaps),deleteAllMapsButton.addEventListener("mouseenter",function(){for(var e=new Event("mouseenter"),t=mapsCollection.children.length-1,n=0;n<t;n++)mapsCollection.children[t-n].children[1].dispatchEvent(e)},!1),deleteAllMapsButton.addEventListener("mouseleave",function(){for(var e=new Event("mouseleave"),t=mapsCollection.children.length-1,n=0;n<t;n++)mapsCollection.children[t-n].children[1].dispatchEvent(e)},!1)});